(function e$$0(w,C,e){function k(m,F){if(!C[m]){if(!w[m]){var D="function"==typeof require&&require;if(!F&&D)return D(m,!0);if(A)return A(m,!0);throw Error("Cannot find module '"+m+"'");}D=C[m]={exports:{}};w[m][0].call(D.exports,function(f){var a=w[m][1][f];return k(a?a:f)},D,D.exports,e$$0,w,C,e)}return C[m].exports}for(var A="function"==typeof require&&require,E=0;E<e.length;E++)k(e[E]);return k})({1:[function(h,w,C){function e(){}function k(d,a,b,f,t){d.slice(0,10).fetch(function(u){return u?
A(d,a,b,f,t):f(null,"Couldn't access BAM.")},{timeout:5E3})}function A(d,f,t,K,G){function x(c){if(!c)return K(null,"Couldn't access BAM");c=b(c,c.byteLength);c=new Uint8Array(c);var g=m(c,0);if(g!=u)return K(null,"Not a BAM file, magic=0x"+g.toString(16));for(var q=m(c,4),l="",g=0;g<q;++g)l+=String.fromCharCode(c[g+8]);l=m(c,q+8);q+=12;s.chrToIndex={};s.indexToChr=[];for(g=0;g<l;++g){for(var r=m(c,q),B="",n=0;n<r-1;++n)B+=String.fromCharCode(c[q+4+n]);m(c,q+r+4);s.chrToIndex[B]=g;0==B.indexOf("chr")?
s.chrToIndex[B.substring(3)]=g:s.chrToIndex["chr"+B]=g;s.indexToChr.push(B);q=q+8+r}if(s.indices)return K(s)}var s=new e;s.data=d;s.bai=f;s.indexChunks=t;var l=s.indexChunks?s.indexChunks.minBlockIndex:1E9;if(s.indexChunks){f=s.indexChunks.chunks;s.indices=[];for(var c=0;c<f.length;c++)s.indices[c]=null;s.data.slice(0,l).fetch(x)}else s.bai.fetch(function(c){var g,q,J;if(c){var r=new Uint8Array(c),B=m(r,0);if(B!=v)c=K(null,"Not a BAI file, magic=0x"+B.toString(16));else{B=m(r,4);s.indices=[];for(var n=
8,N=0;N<B;++N){var L=n;g=r;var M=J=L;q=m(g,M);for(var M=M+4,H=0;H<q;++H){m(g,M);var y=m(g,M+4),M=M+(8+16*y)}for(var H=m(g,M),M=M+4,y=1E9,b=M,f=0;f<H;++f){var u=a(g,b),b=b+8;if(u){g=u.block;0<u.offset&&(g+=65536);g<y&&(y=g);break}}M+=8*H;g=y;J=M-J;n+=J;l=Math.min(g,l);0<q&&(s.indices[N]=new Uint8Array(c,L,n-L))}c=!0}}else c="Couldn't access BAI";!0!==c?s.bai.url&&"undefined"===typeof G?(s.bai.url=s.data.url.replace(/.bam$/,".bai"),A(d,s.bai,t,K,!0)):K(null,c):s.data.slice(0,l).fetch(x)})}function E(){}
if("undefined"!==typeof h){h("./spans");C=h("./bin");var m=C.readInt,F=C.readShort,D=C.readByte,f=C.readFloat;h=h("./lh3utils");var a=h.readVob,b=h.unbgzf,d=h.reg2bins,t=h.Chunk}var u=21840194,v=21578050;h={MULTIPLE_SEGMENTS:1,ALL_SEGMENTS_ALIGN:2,SEGMENT_UNMAPPED:4,NEXT_SEGMENT_UNMAPPED:8,REVERSE_COMPLEMENT:16,NEXT_REVERSE_COMPLEMENT:32,FIRST_SEGMENT:64,LAST_SEGMENT:128,SECONDARY_ALIGNMENT:256,QC_FAIL:512,DUPLICATE:1024,SUPPLEMENTARY:2048};e.prototype.blocksForRange=function(b,f,u){var v=this.indices[b];
if(!v)return[];b=d(f,u);for(var e=[],x=0;x<b.length;++x)e[b[x]]=!0;b=[];for(var s=[],x=m(v,0),l=4,c=0;c<x;++c){var p=m(v,l),g=m(v,l+4),l=l+8;if(e[p])for(var q=0;q<g;++q){var J=a(v,l),r=a(v,l+8);(4681>p?s:b).push(new t(J,r));l+=16}else l+=16*g}x=m(v,l);e=null;f=Math.min(f>>14,x-1);u=Math.min(u>>14,x-1);for(x=f;x<=u;++x)(f=a(v,l+4+8*x))&&(!e||f.block<e.block||f.offset<e.offset)&&(e=f);v=[];if(null!=e)for(x=0;x<s.length;++x)u=s[x],u.maxv.block>=e.block&&u.maxv.offset>=e.offset&&v.push(u);s=v;v=[];for(x=
0;x<s.length;++x)v.push(s[x]);for(x=0;x<b.length;++x)v.push(b[x]);v.sort(function(c,g){var p=c.minv.block-g.minv.block;return 0!=p?p:c.minv.offset-g.minv.offset});b=[];if(0<v.length){s=v[0];for(x=1;x<v.length;++x)u=v[x],u.minv.block==s.maxv.block?s=new t(s.minv,u.maxv):(b.push(s),s=u);b.push(s)}return b};e.prototype.fetch=function(d,a,f,u,v){function t(){if(q>=c.length)return u(g);if(J){var p=new Uint8Array(J),p=s.readBamRecords(p,c[q].minv.offset,g,a,f,l,v);J=null;++q;return p?u(g):t()}var B=c[q],
p=B.minv.block;s.data.slice(p,B.maxv.block+65536-p).fetch(function(c){J=b(c,B.maxv.block-B.minv.block+1);return t()})}var s=this;v=v||{};var l=this.chrToIndex[d],c;if(void 0===l)c=[];else{if(null===this.indices[l]&&this.indexChunks.chunks[l]){var p=this.indexChunks.chunks[l];return this.bai.slice(p[0],p[1]).fetch(function(c){c=new Uint8Array(c);this.indices[l]=c;return this.fetch(d,a,f,u,v)}.bind(this))}(c=this.blocksForRange(l,a,f))||u(null,"Error in index fetch")}var g=[],q=0,J;t()};var x="=ACxGxxxTxxxxxxN".split(""),
O="MIDNSHP=X???????".split("");e.prototype.readBamRecords=function(d,a,b,u,v,t,s){for(;;){var l=m(d,a),l=a+l+4;if(l>=d.length)return!1;var c=new E,p=m(d,a+4),g=m(d,a+8),q=m(d,a+12),J=(q&65280)>>8,r=q&255,q=m(d,a+16),B=(q&4294901760)>>16,n=q&65535,q=m(d,a+20),N=m(d,a+24),L=m(d,a+28);m(d,a+32);c.segment=this.indexToChr[p];c.flag=B;c.pos=g;c.mq=J;s.light&&(c.seqLength=q);if(!s.light){0<=N&&(c.nextSegment=this.indexToChr[N],c.nextPos=L);J="";for(g=0;g<r-1;++g)J+=String.fromCharCode(d[a+36+g]);c.readName=
J;a=a+36+r;r="";for(g=0;g<n;++g)J=m(d,a),r=r+(J>>4)+O[J&15],a+=4;c.cigar=r;n="";r=q+1>>1;for(g=0;g<r;++g)J=d[a+g],n+=x[(J&240)>>4],n.length<q&&(n+=x[J&15]);a+=r;c.seq=n;n="";for(g=0;g<q;++g)n+=String.fromCharCode(d[a+g]+33);a+=q;for(c.quals=n;a<l;){n=String.fromCharCode(d[a],d[a+1]);r=String.fromCharCode(d[a+2]);if("A"==r)r=String.fromCharCode(d[a+3]),a+=4;else if("i"==r||"I"==r)r=m(d,a+3),a+=7;else if("c"==r||"C"==r)r=d[a+3],a+=4;else if("s"==r||"S"==r)r=F(d,a+3),a+=5;else if("f"==r)r=f(d,a+3),a+=
7;else if("Z"==r||"H"==r)for(a+=3,r="";g=d[a++],0!=g;)r+=String.fromCharCode(g);else if("B"==r){r=String.fromCharCode(d[a+3]);g=m(d,a+4);if("i"==r||"I"==r||"f"==r)J=4,B="f"==r?f:m;else if("s"==r||"S"==r)J=2,B=F;else if("c"==r||"C"==r)J=1,B=D;else throw"Unknown array type "+r;a+=8;r=[];for(N=0;N<g;++N)r.push(B(d,a)),a+=J}else throw"Unknown type "+r;c[n]=r}}if(!u||c.pos<=v&&c.pos+q>=u)void 0!==t&&p!=t||b.push(c);if(c.pos>v)return!0;a=l}};"undefined"!==typeof w&&(w.exports={makeBam:k,BAM_MAGIC:u,BAI_MAGIC:v,
BamFlags:h})},{"./bin":3,"./lh3utils":8,"./spans":10}],2:[function(h,w,C){function e(l,c){return l[c]+l[c+1]*z+l[c+2]*K+l[c+3]*G+l[c+4]*R}function k(){}function A(l,c,p,g){this.bwg=l;this.cirTreeOffset=c;this.cirTreeLength=p;this.isSummary=g}function E(l,c,p){var g=new k;g.data=l;g.name=p;g.data.slice(0,512).salted().fetch(function(p){if(!p)return c(null,"Couldn't fetch file");var l=new Uint8Array(p),r=new Int16Array(p);p=new Int32Array(p);var B=l[0]+z*l[1]+K*l[2]+G*l[3];if(B==x)g.type="bigwig";else if(B==
P)g.type="bigbed";else return B==O||B==Q?c(null,"Currently don't support big-endian BBI files"):c(null,"Not a supported format, magic=0x"+B.toString(16));g.version=r[2];g.numZoomLevels=r[3];g.chromTreeOffset=e(l,8);g.unzoomedDataOffset=e(l,16);g.unzoomedIndexOffset=e(l,24);g.fieldCount=r[16];g.definedFieldCount=r[17];g.asOffset=e(l,36);g.totalSummaryOffset=e(l,44);g.uncompressBufSize=p[13];g.extHeaderOffset=e(l,56);g.zoomLevels=[];for(r=0;r<g.numZoomLevels;++r){var B=p[6*r+16],n=e(l,24*r+72),a=e(l,
24*r+80);g.zoomLevels.push({reduction:B,dataOffset:n,indexOffset:a})}g.readChromTree(function(){g.getAutoSQL(function(p){g.schema=p;return c(g)})})},{timeout:5E3})}function m(l,c,p,g,q){this.bbi=l;this.type=c;this.fieldCount=p;this.offset=g;this.field=q}if("undefined"!==typeof h){C=h("./spans");var F=C.Range,D=C.union,f=C.intersection;C=h("./das");var a=C.DASFeature,b=C.DASGroup,d=h("./utils").shallowCopy,t=h("./bin").readInt;h=h("jszlib");var u=h.inflateBuffer,v=h.arrayCopy}var x=2291137574,O=654086024,
P=2273964779,Q=3958540679,z=256,K=65536,G=16777216,R=4294967296,s=/^[0-9]+,[0-9]+,[0-9]+/;k.prototype.readChromTree=function(l){var c=this;this.chromsToIDs={};this.idsToChroms={};this.maxID=0;var p=this.unzoomedDataOffset,p=p+4-(p-this.chromTreeOffset&3);this.data.slice(this.chromTreeOffset,p-this.chromTreeOffset).fetch(function(p){var q=new Uint8Array(p),a=new Int16Array(p),r=(new Int32Array(p))[2];e(q,16);var B=function(p){var g=q[p],l=a[p/2+1];p+=4;for(var d=0;d<l;++d)if(0==g){p+=r;var s=e(q,p);
p+=8;s-=c.chromTreeOffset;B(s)}else{for(var s="",b=0;b<r;++b){var f=q[p++];0!=f&&(s+=String.fromCharCode(f))}b=q[p+3]<<24|q[p+2]<<16|q[p+1]<<8|q[p+0];p+=8;c.chromsToIDs[s]=b;0==s.indexOf("chr")&&(c.chromsToIDs[s.substr(3)]=b);c.idsToChroms[b]=s;c.maxID=Math.max(c.maxID,b)}};B(32);l(c)})};A.prototype.readWigData=function(l,c,p,g){l=this.bwg.chromsToIDs[l];if(void 0===l)return g([]);this.readWigDataById(l,c,p,g)};A.prototype.readWigDataById=function(l,c,p,g){var q=this;if(this.cirHeader){var a=[],r=
0;Date.now();var B=function(g,q,r,a){return(0>l||g==l)&&q<=p&&r>=c},d=function(c,p){q.bwg.instrument&&console.log("level="+p+"; offset="+c+"; time="+(Date.now()|0));r+=c.length;if(1==c.length&&48==c[0]-q.cirTreeOffset&&q.cachedCirRoot)b(q.cachedCirRoot,0,p),--r,0==r&&q.fetchFeatures(B,a,g);else{for(var l=4+32*q.cirBlockSize,d,n=0;n<c.length;++n){var f=new F(c[n],c[n]+l);d=d?D(d,f):f}l=d.ranges();for(d=0;d<l.length;++d)s(c,l[d],p)}},s=function(c,p,l,d){p.max();p.min();q.bwg.data.slice(p.min(),p.max()-
p.min()).fetch(function(d){for(var n=0;n<c.length;++n)p.contains(c[n])&&(b(d,c[n]-p.min(),l),48==c[n]-q.cirTreeOffset&&0==c[n]-p.min()&&(q.cachedCirRoot=d),--r,0==r&&q.fetchFeatures(B,a,g))})},b=function(g,q,r){var B=new Uint8Array(g),s=new Int16Array(g);g=new Int32Array(g);var b=B[q],s=s[q/2+1];q+=4;if(0!=b)for(b=0;b<s;++b){var f=q/4,u=g[f],L=g[f+1],v=g[f+2],f=g[f+3],N=e(B,q+16);r=e(B,q+24);(0>l||u<l||u==l&&L<=p)&&(0>l||v>l||v==l&&f>=c)&&a.push({offset:N,size:r});q+=32}else{for(var t=[],b=0;b<s;++b)f=
q/4,u=g[f],L=g[f+1],v=g[f+2],f=g[f+3],N=e(B,q+16),(0>l||u<l||u==l&&L<=p)&&(0>l||v>l||v==l&&f>=c)&&t.push(N),q+=24;0<t.length&&d(t,r+1)}};d([q.cirTreeOffset+48],1)}else this.bwg.data.slice(this.cirTreeOffset,48).fetch(function(r){q.cirHeader=r;r=new Int32Array(q.cirHeader);q.cirBlockSize=r[1];q.readWigDataById(l,c,p,g)})};A.prototype.fetchFeatures=function(l,c,p){var g=this;c.sort(function(c,p){return(c.offset|0)-(p.offset|0)});if(0==c.length)p([]);else{var q=[],d=function(c,p,l,r){r||(r={});var d=
new a;d._chromId=c;d.segment=g.bwg.idsToChroms[c];d.min=p;d.max=l;d.type=g.bwg.type;for(var s in r)d[s]=r[s];q.push(d)},r=function(){if(0==c.length)Date.now(),p(q);else{var a=c[0];if(a.data)g.parseFeatures(a.data,d,l),c.splice(0,1),r();else{for(var s=a.offset,b=a.size,a=1;a<c.length&&c[a].offset==s+b;)b+=c[a].size,++a;g.bwg.data.slice(s,b).fetch(function(p){for(var q=0,l=0;q<b;){var a=c[l],d;0<g.bwg.uncompressBufSize?d=u(p,q+2,a.size-2):(d=new Uint8Array(a.size),v(new Uint8Array(p,q,a.size),0,d,0,
a.size),d=d.buffer);a.data=d;q+=a.size;++l}r()})}}};r()}};A.prototype.parseFeatures=function(l,c,p){var g=new Uint8Array(l);if(this.isSummary)for(var q=new Int16Array(l),a=new Int32Array(l),r=new Float32Array(l),g=l.byteLength/32,q=0;q<g;++q){l=a[8*q];var B=a[8*q+1],n=a[8*q+2],u=a[8*q+3],v=r[8*q+5],t=r[8*q+6];p(l,B+1,n)&&(u={type:"bigwig",score:t/u,maxScore:v},"bigbed"==this.bwg.type&&(u.type="density"),c(l,B+1,n,u))}else if("bigwig"==this.bwg.type)if(q=new Int16Array(l),a=new Int32Array(l),r=new Float32Array(l),
l=a[0],v=a[1],t=a[3],u=a[4],B=g[20],g=q[11],3==B)for(q=0;q<g;++q){var H=r[q+6],a=v+q*t+1,B=v+q*t+u;p(l,a,B)&&c(l,a,B,{score:H})}else if(2==B)for(q=0;q<g;++q)B=a[2*q+6]+1,n=B+u-1,H=r[2*q+7],p(l,B,n)&&c(l,B,n,{score:H});else if(1==B)for(q=0;q<g;++q)B=a[3*q+6]+1,n=a[3*q+7],H=r[3*q+8],B>n&&(B=n),p(l,B,n)&&c(l,B,n,{score:H});else console.log("Currently not handling bwgType="+B);else if("bigbed"==this.bwg.type)for(q=0,u=this.bwg.definedFieldCount,v=this.bwg.schema;q<g.length;){l=g[q+3]<<24|g[q+2]<<16|g[q+
1]<<8|g[q+0];B=g[q+7]<<24|g[q+6]<<16|g[q+5]<<8|g[q+4];n=g[q+11]<<24|g[q+10]<<16|g[q+9]<<8|g[q+8];q+=12;for(H="";;)if(t=g[q++],0!=t)H+=String.fromCharCode(t);else break;var t={},y;y=0<H.length?H.split("\t"):[];0<y.length&&3<u&&(t.label=y[0]);1<y.length&&4<u&&(H=parseInt(y[1]),isNaN(H)||(t.score=H));2<y.length&&5<u&&(t.orientation=y[2]);5<y.length&&8<u&&(H=y[5],s.test(H)&&(t.itemRgb="rgb("+H+")"));if(y.length>u-3&&v)for(H=u-3;H<y.length;++H)t[v.fields[H+3].name]=y[H];if(p(l,B+1,n,y))if(12>u)c(l,B+1,
n,t);else{var H=y[3]|0,e=y[4]|0,x=y[6]|0,z=y[7].split(","),m=y[8].split(",");t.exonFrames&&(r=t.exonFrames.split(","),t.exonFrames=void 0);t.type="transcript";var k=new b;for(a in t)k[a]=t[a];k.id=y[0];k.segment=this.bwg.idsToChroms[l];k.min=B+1;k.max=n;k.notes=[];t.groups=[k];if(9<y.length){var h=n=t.geneName||y[9];10<y.length&&(h=y[10]);t.geneName2&&(h=t.geneName2);y=d(k);y.id=n;y.label=h;y.type="gene";t.groups.push(y)}n=[];for(y=0;y<x;++y)k=(m[y]|0)+B,k=new F(k,k+(z[y]|0)),n.push(k);z=D(n);x=z.ranges();
for(B=0;B<x.length;++B)n=x[B],c(l,n.min()+1,n.max(),t);if(e>H&&(B="+"==t.orientation?new F(H,e+3):new F(H-3,e),B=f(z,B))){t.type="translation";H=B.ranges();for(z=e=0;H[0].min()>x[z].max();)z++;for(B=0;B<H.length;++B)x=B,"-"==t.orientation&&(x=H.length-B-1),n=H[x],t.readframe=e,r&&(x=parseInt(r[x+z]),"number"===typeof x&&0<=x&&2>=x&&(t.readframe=x,t.readframeExplicit=!0)),x=n.max()-n.min(),e=(e+x)%3,c(l,n.min()+1,n.max(),t)}}}else throw Error("Don't know what to do with "+this.bwg.type);};A.prototype.getFirstAdjacent=
function(a,c,p,g){a=this.bwg.chromsToIDs[a];if(void 0===a)return g([]);this.getFirstAdjacentById(a,c,p,g)};A.prototype.getFirstAdjacentById=function(a,c,p,g){var q=this;if(this.cirHeader){var d=null,r=-1,s=-1,n=0;Date.now();var b=function(c,p){n+=c.length;for(var g=4+32*q.cirBlockSize,a,r=0;r<c.length;++r){var d=new F(c[r],c[r]+g);a=a?D(a,d):d}g=a.ranges();for(a=0;a<g.length;++a)f(c,g[a],p)},f=function(r,s,B,b){s.max();s.min();q.bwg.data.slice(s.min(),s.max()-s.min()).fetch(function(b){for(var f=
0;f<r.length;++f)if(s.contains(r[f])&&(t(b,r[f]-s.min(),B),--n,0==n)){if(!d)return 0<p&&(0!=a||0<c)?q.getFirstAdjacentById(0,0,p,g):0>p&&(a!=q.bwg.maxID||1E9>c)?q.getFirstAdjacentById(q.bwg.maxID,1E9,p,g):g([]);q.fetchFeatures(function(g,q,r,d){return 0>p&&(g<a||r<c)||0<p&&(g>a||q>c)},[d],function(c){for(var q=null,a=-1,r=-1,d=0;d<c.length;++d){var l=c[d],s=l._chromId,B=l.min,n=l.max;if(null==q||0>p&&(s>a||n>r)||0<p&&(s<a||B<r))q=l,r=0>p?n:B,a=s}return null!=q?g([q]):g([])})}})},t=function(g,n,f){var t=
new Uint8Array(g),u=new Int16Array(g);g=new Int32Array(g);var v=t[n],u=u[n/2+1];n+=4;if(0!=v)for(v=0;v<u;++v){var L=n/4,x=g[L],z=g[L+1],m=g[L+2],k=g[L+3],L=e(t,n+16);f=e(t,n+24);(0>p&&(x<a||x==a&&z<=c)||0<p&&(m>a||m==a&&k>=c))&&!/_random/.exec(q.bwg.idsToChroms[x])&&(null==d||0>p&&(m>r||m==r&&k>s)||0<p&&(x<r||x==r&&z<s))&&(d={offset:L,size:f},s=0>p?k:z,r=0>p?m:x);n+=32}else{for(var M=t=-1,v=0;v<u;++v){L=n/4;x=g[L];z=g[L+1];m=g[L+2];k=g[L+3];L=g[L+4]<<32|g[L+5];if(0>p&&(x<a||x==a&&z<=c)&&m>=a||0<p&&
(m>a||m==a&&k>=c)&&x<=a)if(0>t||k>M)t=L,M=0>p?k:z;n+=24}0<=t&&b([t],f+1)}};b([q.cirTreeOffset+48],1)}else this.bwg.data.slice(this.cirTreeOffset,48).fetch(function(r){q.cirHeader=r;r=new Int32Array(q.cirHeader);q.cirBlockSize=r[1];q.getFirstAdjacentById(a,c,p,g)})};k.prototype.readWigData=function(a,c,p,g){this.getUnzoomedView().readWigData(a,c,p,g)};k.prototype.getUnzoomedView=function(){if(!this.unzoomedView){var a=4E3;this.zoomLevels[0]&&(a=this.zoomLevels[0].dataOffset-this.unzoomedIndexOffset);
this.unzoomedView=new A(this,this.unzoomedIndexOffset,a,!1)}return this.unzoomedView};k.prototype.getZoomedView=function(a){a=this.zoomLevels[a];a.view||(a.view=new A(this,a.indexOffset,4E3,!0));return a.view};k.prototype._tsFetch=function(a,c,p,g,q){var d=this;if(a>=this.zoomLevels.length-1){if(this.topLevelReductionCache){for(var r=[],s=this.topLevelReductionCache,n=0;n<s.length;++n)s[n]._chromId==c&&r.push(s[n]);return q(r)}this.getZoomedView(this.zoomLevels.length-1).readWigDataById(-1,0,3E8,
function(r){d.topLevelReductionCache=r;return d._tsFetch(a,c,p,g,q)})}else return(0>a?this.getUnzoomedView():this.getZoomedView(a)).readWigDataById(c,p,g,q)};k.prototype.thresholdSearch=function(a,c,p,g,q){function d(){if(0==s.length)return q(null);s.sort(function(c,g){var q=c.zoom-g.zoom;if(0!=q)return q;q=c.chrOrd-g.chrOrd;return 0!=q?q:c.min-g.min*p});var a=s.splice(0,1)[0];r._tsFetch(a.zoom,a.chr,a.min,a.max,function(r){var n=0<p?0:3E8;a.fromRef&&(n=c);for(var l=0;l<r.length;++l){var b=r[l],f;
f=void 0!=b.maxScore?b.maxScore:b.score;if(0<p){if(f>g)if(0>a.zoom){if(b.min>n)return q(b)}else b.max>n&&s.push({chr:a.chr,chrOrd:a.chrOrd,zoom:a.zoom-2,min:b.min,max:b.max,fromRef:a.fromRef})}else if(f>g)if(0>a.zoom){if(b.max<n)return q(b)}else b.min<n&&s.push({chr:a.chr,chrOrd:a.chrOrd,zoom:a.zoom-2,min:b.min,max:b.max,fromRef:a.fromRef})}d()})}p=0>p?-1:1;var r=this;a=this.chromsToIDs[a];for(var s=[{chrOrd:0,chr:a,zoom:r.zoomLevels.length-4,min:0,max:3E8,fromRef:!0}],n=1;n<=this.maxID+1;++n){var b=
(a+p*n)%(this.maxID+1);0>b&&(b+=this.maxID+1);s.push({chrOrd:n,chr:b,zoom:r.zoomLevels.length-1,min:0,max:3E8})}d()};k.prototype.getAutoSQL=function(a){if(!this.asOffset)return a(null);this.data.slice(this.asOffset,2048).fetch(function(c){var p=new Uint8Array(c);c="";for(var g=0;g<p.length&&0!=p[g];++g)c+=String.fromCharCode(p[g]);var p=/([\w\[\]]+)\s+(\w+)\s*;\s*("([^"]+)")?\s*/g,q=/(\w+)\s+(\w+)\s+("([^"]+)")?\s+\(\s*/.exec(c);if(q){g={declType:q[1],name:q[2],comment:q[4],fields:[]};c=c.substring(q[0]);
for(q=p.exec(c);null!=q;q=p.exec(c))g.fields.push({type:q[1],name:q[2],comment:q[4]});return a(g)}})};k.prototype.getExtraIndices=function(a){var c=this;if(4>this.version||0==this.extHeaderOffset||"bigbed"!=this.type)return a(null);this.data.slice(this.extHeaderOffset,64).fetch(function(p){if(!p)return a(null,"Couldn't fetch extension header");var g=new Uint8Array(p),q=new Int16Array(p);new Int32Array(p);var d=q[1];p=e(g,4);if(0==d)return a(null);c.data.slice(p,20*d).fetch(function(p){if(!p)return a(null,
"Couldn't fetch index info");var g=new Uint8Array(p),q=new Int16Array(p);new Int32Array(p);p=[];for(var s=0;s<d;++s){var b=q[10*s],f=q[10*s+1],t=e(g,20*s+4),b=new m(c,b,f,t,q[10*s+8]);p.push(b)}a(p)})})};m.prototype.lookup=function(a,c){var p=this;this.bbi.data.slice(this.offset,32).fetch(function(g){function q(g){p.bbi.data.slice(g,4+r*(s+n)).fetch(function(g){var d=new Uint8Array(g),r=new Uint16Array(g);new Uint32Array(g);r=r[1];g=4;if(0==d[0]){for(var b=null,f=0;f<r;++f){for(var u="",v=0;v<s;++v){var J=
d[g++];0!=J&&(u+=String.fromCharCode(J))}v=e(d,g);g+=8;if(0>a.localeCompare(u)&&b){q(b);return}b=v}q(b)}else{for(f=0;f<r;++f){u="";for(v=0;v<s;++v)J=d[g++],0!=J&&(u+=String.fromCharCode(J));if(u==a)return r=e(d,g),d=t(d,g+8),p.bbi.getUnzoomedView().fetchFeatures(function(c,g,q,d){if(d&&d.length>p.field-3)return d[p.field-3]==a},[{offset:r,size:d}],c);g+=n}return c([])}})}var d=new Uint8Array(g);new Int16Array(g);g=new Int32Array(g);var r=g[1],s=g[2],n=g[3];e(d,16);q(p.offset+32)})};"undefined"!==
typeof w&&(w.exports={makeBwg:E,BIG_BED_MAGIC:P,BIG_WIG_MAGIC:x})},{"./bin":3,"./das":5,"./spans":10,"./utils":11,jszlib:24}],3:[function(h,w,C){function e(a){this.blob=a}function k(a,d,b,f){f||("object"===typeof d?(f=d,d=void 0):f={});this.url=a;this.start=d||0;b&&(this.end=b);this.opts=f}function A(a){if(!a)return null;for(var d=new Uint8Array(a.length),b=0;b<d.length;++b)d[b]=a.charCodeAt(b);return d.buffer}function E(a,d){return a[d+7]<<24|a[d+6]<<16|a[d+5]<<8|a[d+4]}function m(a,d){return a[d+
3]<<24|a[d+2]<<16|a[d+1]<<8|a[d]}function F(a,d){return a[d+1]<<8|a[d]}function D(a,d){return a[d]}function f(a,d){return a[d]<<24|a[d+1]<<16|a[d+2]<<8|a[d+3]}if("undefined"!==typeof h)var a=h("./utils").shallowCopy,b=h("./sha1").b64_sha1;e.prototype.slice=function(a,d){var b;b=this.blob.slice?d?this.blob.slice(a,a+d):this.blob.slice(a):d?this.blob.webkitSlice(a,a+d):this.blob.webkitSlice(a);return new e(b)};e.prototype.salted=function(){return this};e.prototype.fetch="undefined"!==typeof FileReader?
function(a){var d=new FileReader;d.onloadend=function(b){a(A(d.result))};d.readAsBinaryString(this.blob)}:function(a){var d=new FileReaderSync;try{var b=d.readAsArrayBuffer(this.blob);a(b)}catch(f){a(null,f)}};k.prototype.slice=function(a,d){if(0>a)throw"Bad slice "+a;var b=this.start,f=this.end,b=b&&a?b+a:a||b;return new k(this.url,b,d&&b?b+d-1:f||d-1,this.opts)};var d=0,t=0<=navigator.userAgent.indexOf("Safari")&&0>navigator.userAgent.indexOf("Chrome");k.prototype.fetchAsText=function(a){try{var f=
new XMLHttpRequest,e=this.url;(t||this.opts.salt)&&0>e.indexOf("?")&&(e=e+"?salt="+b(""+Date.now()+","+ ++d));f.open("GET",e,!0);if(this.end){if(1E8<this.end-this.start)throw"Monster fetch!";f.setRequestHeader("Range","bytes="+this.start+"-"+this.end)}f.onreadystatechange=function(){if(4==f.readyState)return 200==f.status||206==f.status?a(f.responseText):a(null)};this.opts.credentials&&(f.withCredentials=!0);f.send("")}catch(m){return a(null)}};k.prototype.salted=function(){var d=a(this.opts);d.salt=
!0;return new k(this.url,this.start,this.end,d)};k.prototype.fetch=function(a,f){var e=this;f=f||{};var m=f.attempt||1,k=f.truncatedLength;if(3<m)return a(null);try{var h;f.timeout&&!this.opts.credentials&&(h=setTimeout(function(){console.log("timing out "+G);z.abort();return a(null,"Timeout")},f.timeout));var z=new XMLHttpRequest,K,G=this.url;(t||this.opts.salt)&&0>G.indexOf("?")&&(G=G+"?salt="+b(""+Date.now()+","+ ++d));z.open("GET",G,!0);z.overrideMimeType("text/plain; charset=x-user-defined");
if(this.end){if(1E8<this.end-this.start)throw"Monster fetch!";z.setRequestHeader("Range","bytes="+this.start+"-"+this.end);K=this.end-this.start+1}z.responseType="arraybuffer";z.onreadystatechange=function(){if(4==z.readyState){h&&clearTimeout(h);if(200==z.status||206==z.status){if(z.response){var d=z.response.byteLength;return!K||K==d||k&&d==k?a(z.response):e.fetch(a,{attempt:m+1,truncatedLength:d})}if(z.mozResponseArrayBuffer)return a(z.mozResponseArrayBuffer);d=z.responseText;return!K||K==d.length||
k&&d.length==k?a(A(z.responseText)):e.fetch(a,{attempt:m+1,truncatedLength:d.length})}return e.fetch(a,{attempt:m+1})}};this.opts.credentials&&(z.withCredentials=!0);z.send("")}catch(F){return a(null)}};(function(a){var d=new ArrayBuffer(8),b=new Uint8Array(d),f=new Float32Array(d);a.readFloat=function(a,d){b[0]=a[d];b[1]=a[d+1];b[2]=a[d+2];b[3]=a[d+3];return f[0]}})(this);"undefined"!==typeof w&&(w.exports={BlobFetchable:e,URLFetchable:k,readInt:m,readIntBE:f,readInt64:E,readShort:F,readByte:D,readFloat:this.readFloat})},
{"./sha1":9,"./utils":11}],4:[function(h,w,C){function e(a,b,d,f){this.red=a|0;this.green=b|0;this.blue=d|0;f&&(this.name=f)}function k(a){a="00"+a.toString(16);return a.substring(a.length-2)}function A(a){var b=F[a];b||((b=D.exec(a))?b=new e("0x"+b[1]|0,"0x"+b[2]|0,"0x"+b[3]|0,a):(b=f.exec(a))?b=new e(b[1]|0,b[2]|0,b[3]|0,a):(console.log("couldn't handle color: "+a),b=F.black),F[a]=b);return b}function E(a,b,d){for(var f=[],u=0;u<d.length;++u)f.push(A(d[u]));d=[];u=0;a:for(;u<a;++u){for(var v=b[0]+
1*u/(a-1)*(b[b.length-1]-b[0]),m=0;m<b.length-1;++m)if(v>=b[m]&&v<=b[m+1]){var v=(v-b[m])/(b[m+1]-b[m]),k=f[m],m=f[m+1],m=(new e(k.red*(1-v)+m.red*v|0,k.green*(1-v)+m.green*v|0,k.blue*(1-v)+m.blue*v|0)).toSvgString();d.push(m);continue a}throw"Bad step";}return d}function m(a,b,d,f){return f?E(a,[0,0.5,1],[b,d,f]):E(a,[0,1],[b,d])}e.prototype.toSvgString=function(){this.name||(this.name="rgb("+this.red+","+this.green+","+this.blue+")");return this.name};e.prototype.toHexString=function(){return"#"+
k(this.red)+k(this.green)+k(this.blue)};var F={red:new e(255,0,0,"red"),green:new e(0,255,0,"green"),blue:new e(0,0,255,"blue"),yellow:new e(255,255,0,"yellow"),white:new e(255,255,255,"white"),black:new e(0,0,0,"black"),gray:new e(180,180,180,"gray"),grey:new e(180,180,180,"grey"),lightskyblue:new e(135,206,250,"lightskyblue"),lightsalmon:new e(255,160,122,"lightsalmon"),hotpink:new e(255,105,180,"hotpink")},D=/^#([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/,f=/rgb\(([0-9]+),([0-9]+),([0-9]+)\)/;
"undefined"!==typeof w&&(w.exports={makeColourSteps:E,makeGradient:m,dasColourForName:A})},{}],5:[function(h,w,C){function e(a,d,c,p){this.name=a;this.start=d;this.end=c;this.description=p}function k(a,d){var c;"string"==typeof a?(this.uri=a,c=d||{}):c=a||{};for(var p in c)"function"!=typeof c[p]&&(this[p]=c[p]);this.coords||(this.coords=[]);this.props||(this.props={});(this.dasBaseURI=this.uri)&&"/"!=this.dasBaseURI.substr(this.uri.length-1)&&(this.dasBaseURI+="/")}function A(){}function E(a,d){return a.taxon==
d.taxon&&a.auth==d.auth&&a.version==d.version}function m(a,d,c,p,g){this.name=a;this.start=d;this.end=c;this.alphabet=p;this.seq=g}function F(){}function D(a){a&&(this.id=a)}function f(a,d){this.desc=a;this.uri=d}function a(a){this.type=a;this.objects={};this.blocks=[]}function b(){this.styles=[]}function d(){}function t(a,d){d=d||{};this.uri=a;this.opts=d}function u(a,d){var c=a.getElementsByTagName(d);if(0<c.length&&c[0].firstChild){c=c[0];if(1==c.childNodes.length)return c.firstChild.nodeValue;
for(var p="",g=0;g<c.childNodes.length;++g)p+=c.childNodes[g].nodeValue;return p}return null}function v(a){for(var d=[],c=a.getElementsByTagName("LINK"),p=0;p<c.length;++p){var g=c[p];g.parentNode==a&&d.push(new f(g.firstChild?g.firstChild.nodeValue:"Unknown",g.getAttribute("href")))}return d}function x(a){var d=[];a=a.getElementsByTagName("NOTE");for(var c=0;c<a.length;++c)a[c].firstChild&&d.push(a[c].firstChild.nodeValue);return d}function O(a,d,c,p){if(window.XDomainRequest){var g=new XDomainRequest;
g.onload=function(){var c=new ActiveXObject("Microsoft.XMLDOM");c.async=!1;c.loadXML(g.responseText);d(c)};g.open("get",a);g.send("")}else try{var g=new XMLHttpRequest,q=setTimeout(function(){console.log("timing out "+a);g.abort();d(null,g)},5E3);g.timeout=5E3;g.ontimeout=function(){console.log("timeout on "+a)};g.onreadystatechange=function(){4==g.readyState&&(clearTimeout(q),(200<=g.status||0==g.status)&&d(g.responseXML,g))};g.open("get",a,!0);c&&(g.withCredentials=!0);p&&g.setRequestHeader("X-DAS-Authorisation",
p);g.overrideMimeType("text/xml");g.setRequestHeader("Accept","application/xml,*/*");g.send("")}catch(b){d(null,g,b)}}function P(a){a=(""+a).toLowerCase();return"yes"===a||"true"===a}function Q(a){if(!a)return!1;a=(""+a).toLowerCase();return"no"!==a||"false"!==a}function z(a){var d=K(a);d.styles=[];for(var c=0;c<a.styles.length;++c){var p=d.styles[c]=K(a.styles[c]);p._methodRE=p._labelRE=p._typeRE=void 0;p.style=K(p.style);p.style.id=void 0;p.style._gradient=void 0}return d}if("undefined"!==typeof h){C=
h("./utils");var K=C.shallowCopy,G=C.pusho,R=h("./color").makeColourSteps}e.prototype.toString=function(){return this.name+":"+this.start+".."+this.end};e.prototype.isBounded=function(){return this.start&&this.end};e.prototype.toDASQuery=function(){var a="segment="+this.name;this.start&&this.end&&(a+=":"+this.start+","+this.end);return a};k.prototype.entryPoints=function(a){this.doCrossDomainRequest(this.dasBaseURI+"entry_points",function(d){if(!d)return a([]);var c=[];d=d.getElementsByTagName("SEGMENT");
for(var p=0;p<d.length;++p){var g=d[p],q=g.getAttribute("id"),b=g.getAttribute("size"),r;b?(r=1,b|=0):((r=g.getAttribute("start"))&&(r|=0),(b=g.getAttribute("stop"))&&(b|=0));var f=null;g.firstChild&&(f=g.firstChild.nodeValue);c.push(new e(q,r,b,f))}a(c)})};k.prototype.sequence=function(a,d){var c=this.dasBaseURI+"sequence?"+a.toDASQuery();this.doCrossDomainRequest(c,function(c){if(c){var a=[];c=c.getElementsByTagName("SEQUENCE");for(var q=0;q<c.length;++q){var b=c[q],r=b.getAttribute("id"),f=b.getAttribute("start"),
n=b.getAttribute("stop"),s=null;if(b.firstChild)for(var b=b.firstChild.nodeValue,s="",t=0;;){var u=b.indexOf("\n",t);if(0<=u)s+=b.substring(t,u).toUpperCase(),t=u+1;else{s+=b.substring(t).toUpperCase();break}}a.push(new m(r,f,n,"DNA",s))}d(a)}else d([])})};k.prototype.features=function(a,d,c){d=d||{};var p;if(this.features_uri)p=this.features_uri;else{var g=[];if(a)g.push(a.toDASQuery());else if(d.group)if(a=d.group,"string"==typeof a)g.push("group_id="+a);else for(var q=0;q<a.length;++q)g.push("group_id="+
a[q]);if(d.adjacent)for(a=d.adjacent,"string"==typeof a&&(a=[a]),q=0;q<a.length;++q)g.push("adjacent="+a[q]);if(d.type)if("string"==typeof d.type)g.push("type="+d.type);else for(a=0;a<d.type.length;++a)g.push("type="+d.type[a]);d.maxbins&&g.push("maxbins="+d.maxbins);0<g.length?p=this.dasBaseURI+"features?"+g.join(";"):c([],"No filters specified")}this.doCrossDomainRequest(p,function(a,g){if(a){for(var p=[],d={},q=a.getElementsByTagName("SEGMENT"),b=0;b<q.length;++b){var f=q[b],t=f.getAttribute("id");
d[t]={min:f.getAttribute("start"),max:f.getAttribute("stop")};for(var f=f.getElementsByTagName("FEATURE"),s=0;s<f.length;++s){var l=f[s],e=new F;e.segment=t;e.id=l.getAttribute("id");e.label=l.getAttribute("label");var m=u(l,"START"),z=u(l,"END");(m|0)>(z|0)?(e.min=z|0,e.max=m|0):(e.min=m|0,e.max=z|0);m=l.getElementsByTagName("TYPE");0<m.length&&(m=m[0],m.firstChild&&(e.type=m.firstChild.nodeValue),e.typeId=m.getAttribute("id"),e.typeCv=m.getAttribute("cvId"));e.type=u(l,"TYPE");!e.type&&e.typeId&&
(e.type=e.typeId);e.method=u(l,"METHOD");(m=u(l,"ORIENTATION"))||(m="0");e.orientation=m;e.score=u(l,"SCORE");e.links=v(l);e.notes=x(l);m=l.getElementsByTagName("GROUP");for(z=0;z<m.length;++z){var k=m[z],h=new D;h.type=k.getAttribute("type");h.id=k.getAttribute("id");h.links=v(k);h.notes=x(k);e.groups?e.groups.push(h):e.groups=Array(h)}if(e.notes)for(m=0;m<e.notes.length;++m)z=e.notes[m],0==z.indexOf("Genename=")&&(k=new D,k.type="gene",k.id=z.substring(9),e.groups?e.groups.push(k):e.groups=Array(k));
m=l.getElementsByTagName("PART");if(0<m.length){k=[];for(z=0;z<m.length;++z)k.push(m[z].getAttribute("id"));e.parts=k}m=l.getElementsByTagName("PARENT");if(0<m.length){l=[];for(z=0;z<m.length;++z)l.push(m[z].getAttribute("id"));e.parents=l}p.push(e)}}c(p,void 0,d)}else c([],"Failed request: "+(0==g.status?"server may not support CORS":"status="+g.status))},function(a){c([],a)})};k.prototype.alignments=function(d,b,c){var p=this.dasBaseURI+"alignment?query="+d;this.doCrossDomainRequest(p,function(g){if(g){var d=
[];g=g.getElementsByTagName("alignment");for(var b=0;b<g.length;++b){for(var r=g[b],f=new a(r.getAttribute("alignType")),n=r.getElementsByTagName("alignObject"),t=0;t<n.length;++t){var s=n[t],s={id:s.getAttribute("intObjectId"),accession:s.getAttribute("dbAccessionId"),version:s.getAttribute("objectVersion"),dbSource:s.getAttribute("dbSource"),dbVersion:s.getAttribute("dbVersion")};f.objects[s.id]=s}r=r.getElementsByTagName("block");for(n=0;n<r.length;++n){for(var s=r[n],t={order:s.getAttribute("blockOrder"),
segments:[]},s=s.getElementsByTagName("segment"),l=0;l<s.length;++l){var e=s[l],e={object:e.getAttribute("intObjectId"),min:e.getAttribute("start"),max:e.getAttribute("end"),strand:e.getAttribute("strand"),cigar:u(e,"cigar")};t.segments.push(e)}f.blocks.push(t)}d.push(f)}c(d)}else c([],"Failed request "+p)})};b.prototype.pushStyle=function(a,d,c){a||(a={type:"default"});a=K(a);d&&(a.zoom=d);a.style=c;this.styles.push(a)};k.prototype.stylesheet=function(a,f){var c,p=this.credentials;this.stylesheet_uri?
(c=this.stylesheet_uri,p=!1):c=this.dasBaseURI+"stylesheet";O(c,function(c){if(c){var p=new b;c=c.getElementsByTagName("TYPE");for(var t=0;t<c.length;++t){var r=c[t],B={};B.type=r.getAttribute("id");B.label=r.getAttribute("label");B.method=r.getAttribute("method");for(var r=r.getElementsByTagName("GLYPH"),n=0;n<r.length;++n){var e=r[n],m=e.getAttribute("zoom"),u;a:{if(e.hasChildNodes()){e=e.firstChild;do{if(e.nodeType==Node.ELEMENT_NODE){u=e;break a}e=e.nextSibling}while(null!=e)}u=null}e=new d;e.glyph=
u.localName;for(u=u.firstChild;u;){if(u.nodeType==Node.ELEMENT_NODE)if("BGGRAD"==u.localName){var z=e,v=u.localName,k,h=u;k=(k=h.getAttribute("steps"))?k|0:50;for(var x=[],G=[],h=h.getElementsByTagName("STOP"),K=0;K<h.length;++K){var F=h[K];x.push(1*F.getAttribute("score"));G.push(F.firstChild.nodeValue)}k=R(k,x,G);z[v]=k}else e[u.localName]=u.firstChild.nodeValue;u=u.nextSibling}p.pushStyle(B,m,e)}}a(p)}else f&&f()},p)};t.prototype.sources=function(a,d,c){c||(c={});var p=[];c.taxon&&p.push("organism="+
c.taxon);c.auth&&p.push("authority="+c.auth);c.version&&p.push("version="+c.version);c=this.uri;0<p.length&&(c=c+"?"+p.join("&"));O(c,function(c){if(!c&&d)d();else{var p=[];c=c.getElementsByTagName("SOURCE");for(var b=0;b<c.length;++b){var r=c[b],f=r.getElementsByTagName("VERSION");if(!(1>f.length)){for(var n=f[0],t=n.getElementsByTagName("COORDINATES"),f=[],e=0;e<t.length;++e){var m=t[e],u=new A;u.auth=m.getAttribute("authority");u.taxon=m.getAttribute("taxid");u.version=m.getAttribute("version");
f.push(u)}for(var t=[],m=n.getElementsByTagName("CAPABILITY"),z,e=0;e<m.length;++e)u=m[e],t.push(u.getAttribute("type")),"das1:features"==u.getAttribute("type")&&(z=u.getAttribute("query_uri"),z=z.substring(0,z.length-8));e={};n=n.getElementsByTagName("PROP");for(m=0;m<n.length;++m)G(e,n[m].getAttribute("name"),n[m].getAttribute("value"));z&&(r=new k(z,{source_uri:r.getAttribute("uri"),name:r.getAttribute("title"),desc:r.getAttribute("description"),coords:f,props:e,capabilities:t}),p.push(r))}}a(p)}})};
k.prototype.doCrossDomainRequest=function(a,d,c){var p;this.xUser&&(p="Basic "+btoa(this.xUser+":"+this.xPass));try{return O(a,d,this.credentials,p)}catch(g){if(c)c(g);else throw g;}};"undefined"!==typeof w&&(w.exports={DASGroup:D,DASFeature:F,DASStylesheet:b,DASStyle:d,DASSource:k,DASSegment:e,DASRegistry:t,DASSequence:m,DASLink:f,isDasBooleanTrue:P,isDasBooleanNotFalse:Q,copyStylesheet:z,coordsMatch:E})},{"./color":4,"./utils":11}],6:[function(h,w,C){function e(e,k){0>e.indexOf("?")&&(e+="?soft=true");
return new E(function(h,f){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState)if(300<=a.status)f("Error code "+a.status);else{var b=JSON.parse(a.response);h(k?b:b.location)}};a.open("GET",e,!0);a.setRequestHeader("Accept","application/json");a.responseType="text";a.send("")})}function k(e){this.rawurl=e}function A(e,h,A,f){f||("object"===typeof h?(f=h,h=void 0):f={});this.url="string"===typeof e?new k(e):e;this.start=h||0;A&&(this.end=A);this.opts=f}if("undefined"!==typeof h)var E=
h("es6-promise").Promise;k.prototype.getURLPromise=function(){this.urlPromise&&this.urlPromiseValidity>Date.now()||(this.urlPromise=e(this.rawurl,!0).then(function(e){return e.location}),this.urlPromiseValidity=Date.now()+432E5);return this.urlPromise};A.prototype.slice=function(e,k){if(0>e)throw"Bad slice "+e;var h=this.start,f=this.end,h=h&&e?h+e:e||h;return new A(this.url,h,k&&h?h+k-1:f||k-1,this.opts)};A.prototype.fetchAsText=function(e){var k=this,h=new XMLHttpRequest;k.url.getURLPromise().then(function(f){h.open("GET",
f,!0);if(k.end){if(1E8<k.end-k.start)throw"Monster fetch!";h.setRequestHeader("Range","bytes="+k.start+"-"+k.end)}h.onreadystatechange=function(){if(4==h.readyState)return 200==h.status||206==h.status?e(h.responseText):e(null)};k.opts.credentials&&(h.withCredentials=!0);h.send("")}).catch(function(f){console.log(f);return e(null)})};A.prototype.salted=function(){return this};A.prototype.fetch=function(e,k,h){var f=this;k=k||1;if(3<k)return e(null);f.url.getURLPromise().then(function(a){var b=new XMLHttpRequest,
d;b.open("GET",a,!0);b.overrideMimeType("text/plain; charset=x-user-defined");if(f.end){if(1E8<f.end-f.start)throw"Monster fetch!";b.setRequestHeader("Range","bytes="+f.start+"-"+f.end);d=f.end-f.start+1}b.responseType="arraybuffer";b.onreadystatechange=function(){if(4==b.readyState){if(200==b.status||206==b.status){if(b.response){var a=b.response.byteLength;return!d||d==a||h&&a==h?e(b.response):f.fetch(e,k+1,a)}if(b.mozResponseArrayBuffer)return e(b.mozResponseArrayBuffer);a=b.responseText;if(!d||
d==a.length||h&&a.length==h){if(a=b.responseText){for(var u=new Uint8Array(a.length),v=0;v<u.length;++v)u[v]=a.charCodeAt(v);a=u.buffer}else a=null;return e(a)}return f.fetch(e,k+1,a.length)}return f.fetch(e,k+1)}};f.opts.credentials&&(b.withCredentials=!0);b.send("")}).catch(function(a){console.log(a)})};"undefined"!==typeof w&&(w.exports={lookupEncodeURI:e,EncodeFetchable:A})},{"es6-promise":12}],7:[function(h,w,C){(function(e){function k(a){this.bam=a}function A(a){this.bbi=a}var E=h("./bin"),
m=h("./bam"),F=h("./bigwig"),C=h("./encode"),f=h("./utils"),a={},b=0;e.newID=function(){return"cn"+ ++b};postMessage({tag:"init"});self.onmessage=function(d){var b=d.data,e=d.data.command,v=d.data.tag;if("connectBAM"===e){var h=newID(),w;b.blob?(d=new E.BlobFetchable(b.blob),e=new E.BlobFetchable(b.indexBlob)):(d=new E.URLFetchable(b.uri,{credentials:b.credentials}),e=new E.URLFetchable(b.indexUri,{credentials:b.credentials}),w=b.indexChunks);m.makeBam(d,e,w,function(d,b){d?(a[h]=new k(d),postMessage({tag:v,
result:h})):postMessage({tag:v,error:b||"Couldn't fetch BAM"})})}else if("connectBBI"===e)h=newID(),w=b.blob?new E.BlobFetchable(b.blob):"encode"==b.transport?new C.EncodeFetchable(b.uri,{credentials:b.credentials}):new E.URLFetchable(b.uri,{credentials:b.credentials}),F.makeBwg(w,function(d,b){d?(a[h]=new A(d),postMessage({tag:v,result:h})):postMessage({tag:v,error:b||"Couldn't fetch BBI"})},b.uri);else if("textxhr"===e)f.textXHR(b.uri,function(a,d){a?postMessage({tag:v,result:a}):postMessage({tag:v,
err:d||"Couldn't fetch resource"})});else if("fetch"===e){w=a[d.data.connection];if(!w)return postMessage({tag:v,error:"No such connection: "+d.data.connection});w.fetch(b.tag,b.chr,b.min,b.max,b.zoom,b.opts)}else if("leap"===e){w=a[d.data.connection];if(!w)return postMessage({tag:v,error:"No such connection: "+d.data.connection});w.leap(b.tag,b.chr,b.pos,b.dir)}else if("quantLeap"===e){w=a[d.data.connection];if(!w)return postMessage({tag:v,error:"No such connection: "+d.data.connection});w.quantLeap(b.tag,
b.chr,b.pos,b.dir,b.threshold,b.under)}else if("meta"===e){w=a[d.data.connection];if(!w)return postMessage({tag:v,error:"No such connection: "+d.data.connection});w.meta(b.tag)}else if("search"===e){w=a[d.data.connection];if(!w)return postMessage({tag:v,error:"No such connection: "+d.data.connection});w.search(b.tag,b.query,b.index)}else{if("date"===e)return postMessage({tag:v,result:Date.now()|0});postMessage({tag:v,error:"Bad command "+e})}};k.prototype.fetch=function(a,b,f,e,k,m){m=m||{};this.bam.fetch(b,
f,e,function(b,f){b?postMessage({tag:a,result:b,time:Date.now()|0}):postMessage({tag:a,error:f})},m)};A.prototype.fetch=function(a,b,f,e,k){"number"!==typeof k&&(k=-1);(0>k?this.bbi.getUnzoomedView():this.bbi.getZoomedView(k)).readWigData(b,f,e,function(b){postMessage({tag:a,result:b})})};A.prototype.meta=function(a){for(var b=[1],f=0;f<this.bbi.zoomLevels.length;++f)b.push(this.bbi.zoomLevels[f].reduction);var e=this,k={type:this.bbi.type,zoomLevels:b,fieldCount:this.bbi.fieldCount,definedFieldCount:this.bbi.definedFieldCount,
schema:this.bbi.schema};"bigbed"===this.bbi.type?this.bbi.getExtraIndices(function(b){b&&(e.extraIndices=b,k.extraIndices=b.map(function(a){return a.field}));postMessage({tag:a,result:k})}):postMessage({tag:a,result:k})};A.prototype.leap=function(a,b,f,e){this.bbi.getUnzoomedView().getFirstAdjacent(b,f,e,function(b,f){postMessage({tag:a,result:b,error:f})})};A.prototype.quantLeap=function(a,b,f,e,k,m){this.bbi.thresholdSearch(b,f,e,k,function(b,f){postMessage({tag:a,result:b,error:f})})};A.prototype.search=
function(a,b,f){this.extraIndices[0].lookup(b,function(b,f){postMessage({tag:a,result:b,error:f})})}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./bam":1,"./bigwig":2,"./bin":3,"./encode":6,"./utils":11}],8:[function(h,w,C){function e(a,b){this.block=a;this.offset=b}function k(a,b){var d=4294967296*(a[b+6]&255)+16777216*(a[b+5]&255)+65536*(a[b+4]&255)+256*(a[b+3]&255)+(a[b+2]&255),f=a[b+1]<<8|a[b];return 0==d&&0==f?null:new e(d,f)}function A(a,b){b=Math.min(b||
1,a.byteLength-50);for(var d=[],e=[0],k=0;e[0]<b;){var m=new Uint8Array(a,e[0],12),m=m[11]<<8|m[10],m=D(a,12+m+e[0],Math.min(65536,a.byteLength-12-m-e[0]),e);e[0]+=8;k+=m.byteLength;d.push(m)}if(1==d.length)return d[0];e=new Uint8Array(k);for(m=k=0;m<d.length;++m){var h=new Uint8Array(d[m]);f(h,0,e,k,h.length);k+=h.length}return e.buffer}function E(a,b){this.minv=a;this.maxv=b}function m(a,b){--b;return a>>14==b>>14?4681+(a>>14):a>>17==b>>17?585+(a>>17):a>>20==b>>20?73+(a>>20):a>>23==b>>23?9+(a>>
23):a>>26==b>>26?1+(a>>26):0}function F(a,b){var d,f=[];--b;f.push(0);for(d=1+(a>>26);d<=1+(b>>26);++d)f.push(d);for(d=9+(a>>23);d<=9+(b>>23);++d)f.push(d);for(d=73+(a>>20);d<=73+(b>>20);++d)f.push(d);for(d=585+(a>>17);d<=585+(b>>17);++d)f.push(d);for(d=4681+(a>>14);d<=4681+(b>>14);++d)f.push(d);return f}if("undefined"!==typeof h){h=h("jszlib");var D=h.inflateBuffer,f=h.arrayCopy}e.prototype.toString=function(){return""+this.block+":"+this.offset};"undefined"!==typeof w&&(w.exports={unbgzf:A,readVob:k,
reg2bin:m,reg2bins:F,Chunk:E})},{jszlib:24}],9:[function(h,w,C){function e(f){f=A(E(f));for(var a=F?"0123456789ABCDEF":"0123456789abcdef",b="",d,e=0;e<f.length;e++)d=f.charCodeAt(e),b+=a.charAt(d>>>4&15)+a.charAt(d&15);return b}function k(f){f=A(E(f));for(var a="",b=f.length,d=0;d<b;d+=3)for(var e=f.charCodeAt(d)<<16|(d+1<b?f.charCodeAt(d+1)<<8:0)|(d+2<b?f.charCodeAt(d+2):0),k=0;4>k;k++)a=8*d+6*k>8*f.length?a+D:a+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e>>>6*(3-k)&
63);return a}function A(f){for(var a=Array(f.length>>2),b=0;b<a.length;b++)a[b]=0;for(b=0;b<8*f.length;b+=8)a[b>>5]|=(f.charCodeAt(b/8)&255)<<24-b%32;f=8*f.length;a[f>>5]|=128<<24-f%32;a[(f+64>>9<<4)+15]=f;f=Array(80);for(var b=1732584193,d=-271733879,e=-1732584194,k=271733878,h=-1009589776,x=0;x<a.length;x+=16){for(var A=b,w=d,F=e,z=k,K=h,G=0;80>G;G++){if(16>G)f[G]=a[x+G];else{var E=f[G-3]^f[G-8]^f[G-14]^f[G-16];f[G]=E<<1|E>>>31}var E=b<<5|b>>>27,s;s=20>G?d&e|~d&k:40>G?d^e^k:60>G?d&e|d&k|e&k:d^e^
k;E=m(m(E,s),m(m(h,f[G]),20>G?1518500249:40>G?1859775393:60>G?-1894007588:-899497514));h=k;k=e;e=d<<30|d>>>2;d=b;b=E}b=m(b,A);d=m(d,w);e=m(e,F);k=m(k,z);h=m(h,K)}a=[b,d,e,k,h];f="";for(b=0;b<32*a.length;b+=8)f+=String.fromCharCode(a[b>>5]>>>24-b%32&255);return f}function E(f){for(var a="",b=-1,d,e;++b<f.length;)d=f.charCodeAt(b),e=b+1<f.length?f.charCodeAt(b+1):0,55296<=d&&56319>=d&&56320<=e&&57343>=e&&(d=65536+((d&1023)<<10)+(e&1023),b++),127>=d?a+=String.fromCharCode(d):2047>=d?a+=String.fromCharCode(192|
d>>>6&31,128|d&63):65535>=d?a+=String.fromCharCode(224|d>>>12&15,128|d>>>6&63,128|d&63):2097151>=d&&(a+=String.fromCharCode(240|d>>>18&7,128|d>>>12&63,128|d>>>6&63,128|d&63));return a}function m(f,a){var b=(f&65535)+(a&65535);return(f>>16)+(a>>16)+(b>>16)<<16|b&65535}var F=0,D="";"undefined"!==typeof w&&(w.exports={b64_sha1:k,hex_sha1:e})},{}],10:[function(h,w,C){function e(f,a){if("number"!=typeof f||"number"!=typeof a)throw"Bad range "+f+","+a;this._min=f;this._max=a}function k(f){f=f.sort(D);var a=
[],b=f.shift();f.forEach(function(d){d._min<=b._max?d._max>b._max&&(b._max=d._max):(a.push(b),b=d)});a.push(b);this._ranges=a}function A(f,a){f instanceof k||(f instanceof Array||(f=[f]),f=new k(f));a&&f.insertRange(a);return f}function E(f,a){for(var b=f.ranges(),d=a.ranges(),m=b.length,h=d.length,v=0,x=0,A=[];v<m&&x<h;){f=b[v];a=d[x];var w=Math.max(f.min(),a.min()),E=Math.min(f.max(),a.max());E>=w&&A.push(new e(w,E));f.max()>a.max()?++x:++v}return 0==A.length?null:1==A.length?A[0]:new k(A)}function m(f){var a=
0;f=f.ranges();for(var b=0;b<f.length;++b)var d=f[b],a=a+(d.max()-d.min()+1);return a}function F(f,a){return f.min()<a.min()?-1:f.min()>a.min()?1:f.max()<a.max()?-1:a.max()>f.max()?1:0}function D(f,a){return f._min<a._min?-1:f._min>a._min?1:f._max<a._max?-1:a._max>f._max?1:0}e.prototype.min=function(){return this._min};e.prototype.max=function(){return this._max};e.prototype.contains=function(f){return f>=this._min&&f<=this._max};e.prototype.isContiguous=function(){return!0};e.prototype.ranges=function(){return[this]};
e.prototype._pushRanges=function(f){f.push(this)};e.prototype.toString=function(){return"["+this._min+"-"+this._max+"]"};k.prototype.min=function(){return this._ranges[0].min()};k.prototype.max=function(){return this._ranges[this._ranges.length-1].max()};k.prototype.lower_bound=function(f){var a=this.ranges();if(f>this.max())return a.length;if(f<this.min())return 0;for(var b=0,d=a.length-1;b<=d;){var e=Math.floor((b+d)/2);if(f>a[e]._max)b=e+1;else if(f<a[e]._min)d=e-1;else return e}return b};k.prototype.contains=
function(f){var a=this.lower_bound(f);return a<this._ranges.length&&this._ranges[a].contains(f)?!0:!1};k.prototype.insertRange=function(f){var a=this.lower_bound(f._min);if(a===this._ranges.length)this._ranges.push(f);else{var b=this.ranges();if(f._max<b[a]._min)this._ranges.splice(a,0,f);else{b[a]._min<f._min&&(f._min=b[a]._min);for(var d=a+1;d<b.length&&b[d]._min<=f._max;)d++;d--;b[d]._max>f._max&&(f._max=b[d]._max);this._ranges.splice(a,d-a+1,f)}}};k.prototype.isContiguous=function(){return 1<
this._ranges.length};k.prototype.ranges=function(){return this._ranges};k.prototype._pushRanges=function(f){for(var a=0;a<this._ranges.length;++a)f.push(this._ranges[a])};k.prototype.toString=function(){for(var f="",a=0;a<this._ranges.length;++a)0<a&&(f+=","),f+=this._ranges[a].toString();return f};"undefined"!==typeof w&&(w.exports={Range:e,union:A,intersection:E,coverage:m,rangeOver:F,_rangeOrder:D})},{}],11:[function(h,w,C){function e(a,d){for(var b=0;b<a.length;++b)if(a[b]==d)return;a.push(d)}
function k(a,d,b){a[d]?a[d].push(b):a[d]=[b]}function A(a,d,b){var f=a[d];if(f){for(a=0;a<f.length;++a)if(f[a]==b)return;f.push(b)}else a[d]=[b]}function E(a,d,b,f){if(a)return a;if(d)return d;if(b)return b;if(f)return f}function e(a,d){for(var b=0;b<a.length;++b)if(a[b]==d)return;a.push(d)}function m(a,d){if(!a)return-1;for(var b=0;b<a.length;++b)if(a[b]===d)return b;return-1}function F(a,d,b,f){a=document.createElement(a);if(d){d instanceof Array||(d=[d]);for(var e=0;e<d.length;++e){var k=d[e];
k&&("string"==typeof k?k=document.createTextNode(k):"number"==typeof k&&(k=document.createTextNode(""+k)),a.appendChild(k))}}if(b)for(var c in b)try{a[c]=b[c]}catch(p){throw console.log("error setting "+c),p;}if(f)for(c in f)a.style[c]=f[c];return a}function D(a,d,b,f){a=document.createElementNS(a,d);if(b)for(b instanceof Array||(b=[b]),d=0;d<b.length;++d){var e=b[d];"string"==typeof e&&(e=document.createTextNode(e));a.appendChild(e)}if(f)for(var k in f){b=a;d=k;var e=f[k],c=P[d];if(!c){for(var c=
"",p=0;p<d.length;++p)var g=d.substring(p,p+1),q=g.toLowerCase(),c=q!=g?c+"-"+q:c+g;P[d]=c}b.setAttribute(c,e)}return a}function f(a){if(a&&a.childNodes)for(;0<a.childNodes.length;)a.removeChild(a.firstChild)}function a(d,b){if("undefined"===typeof d)return"undefined";if(null==d)return"null";if("string"==typeof d)return"'"+d+"'";if("number"==typeof d||"boolean"==typeof d)return""+d;if("object"==typeof d){if(d instanceof Array){for(var f=null,e=0;e<d.length;++e)f=(null==f?"":f+", ")+a(d[e],b);return"["+
(f?f:"")+"]"}b=b||{};f=null;for(e in d)b[e]||void 0!=e&&"function"!=typeof d[e]&&(f=(null==f?"":f+", ")+e+": "+a(d[e],b));return"{"+(f?f:"")+"}"}return typeof d}function b(a){var d={},b;for(b in a)d[b]=a[b];return d}function d(a){this.value=a;this.listeners=[]}function t(){this.queue=[]}function u(a,d,b){b&&b.salt&&(a=a+"?salt="+O(""+Date.now()+","+ ++Q));try{var f;b.timeout&&(f=setTimeout(function(){console.log("timing out "+a);e.abort();return d(null,"Timeout")},b.timeout));var e=new XMLHttpRequest;
e.onreadystatechange=function(){4==e.readyState&&(f&&clearTimeout(f),200>e.status||300<=e.status?d(null,"Error code "+e.status):d(e.responseText))};e.open("GET",a,!0);e.responseType="text";b&&b.credentials&&(e.withCredentials=!0);e.send("")}catch(k){d(null,"Exception "+k)}}function v(a,d){if(0==d.indexOf("http:")||0==d.indexOf("https:"))return d;var b=a.lastIndexOf("/");return 0<=b?a.substr(0,b+1)+d:d}function x(a){return F("a",null,{href:a}).href}if("undefined"!==typeof h)var O=h("./sha1").b64_sha1;
var P={};d.prototype.addListener=function(a){this.listeners.push(a)};d.prototype.addListenerAndFire=function(a){this.listeners.push(a);a(this.value)};d.prototype.removeListener=function(a){var d=this.listeners;a=m(d,a);0<=a&&d.splice(a,1)};d.prototype.get=function(){return this.value};d.prototype.set=function(a){this.value=a;for(var d=0;d<this.listeners.length;++d)this.listeners[d](a)};t.prototype.provide=function(a){if(void 0!==this.res)throw"Resource has already been provided.";this.res=a;for(var d=
0;d<this.queue.length;++d)this.queue[d](a);this.queue=null};t.prototype.await=function(a){if(void 0!==this.res)return a(this.res),this.res;this.queue.push(a)};var Q=0;h={TTT:"F",TTC:"F",TTA:"L",TTG:"L",CTT:"L",CTC:"L",CTA:"L",CTG:"L",ATT:"I",ATC:"I",ATA:"I",ATG:"M",GTT:"V",GTC:"V",GTA:"V",GTG:"V",TCT:"S",TCC:"S",TCA:"S",TCG:"S",CCT:"P",CCC:"P",CCA:"P",CCG:"P",ACT:"T",ACC:"T",ACA:"T",ACG:"T",GCT:"A",GCC:"A",GCA:"A",GCG:"A",TAT:"Y",TAC:"Y",TAA:"*",TAG:"*",CAT:"H",CAC:"H",CAA:"Q",CAG:"Q",AAT:"N",AAC:"N",
AAA:"K",AAG:"K",GAT:"D",GAC:"D",GAA:"E",GAG:"E",TGT:"C",TGC:"C",TGA:"*",TGG:"W",CGT:"R",CGC:"R",CGA:"R",CGG:"R",AGT:"S",AGC:"S",AGA:"R",AGG:"R",GGT:"G",GGC:"G",GGA:"G",GGG:"G"};"trim"in String.prototype||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")});"undefined"!==typeof w&&(w.exports={textXHR:u,relativeURL:v,resolveUrlToPage:x,shallowCopy:b,pusho:k,pushnew:e,pushnewo:A,arrayIndexOf:m,pick:E,makeElement:F,makeElementNS:D,removeChildren:f,miniJSONify:a,Observed:d,
Awaited:t,AMINO_ACID_TRANSLATION:h})},{"./sha1":9}],12:[function(h,w,C){w=h("./promise/promise").Promise;h=h("./promise/polyfill").polyfill;C.Promise=w;C.polyfill=h},{"./promise/polyfill":17,"./promise/promise":18}],13:[function(h,w,C){var e=h("./utils").isArray,k=h("./utils").isFunction;C.all=function(h){if(!e(h))throw new TypeError("You must pass an array to all.");return new this(function(e,m){function w(a){return function(b){C[a]=b;0===--f&&e(C)}}var C=[],f=h.length,a;0===f&&e([]);for(var b=0;b<
h.length;b++)(a=h[b])&&k(a.then)?a.then(w(b),m):(C[b]=a,0===--f&&e(C))})}},{"./utils":22}],14:[function(h,w,C){(function(e,k){function h(){return function(){e.nextTick(F)}}function w(){var a=0,d=new f(F),b=document.createTextNode("");d.observe(b,{characterData:!0});return function(){b.data=a=++a%2}}function m(){return function(){a.setTimeout(F,1)}}function F(){for(var a=0;a<b.length;a++){var d=b[a];(0,d[0])(d[1])}b=[]}var D="undefined"!==typeof window?window:{},f=D.MutationObserver||D.WebKitMutationObserver,
a="undefined"!==typeof k?k:void 0===this?window:this,b=[],d;d="undefined"!==typeof e&&"[object process]"==={}.toString.call(e)?h():f?w():m();C.asap=function(a,f){1===b.push([a,f])&&d()}}).call(this,h("/Users/thomas/Projects/dalliance/node_modules/gulp-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"/Users/thomas/Projects/dalliance/node_modules/gulp-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":23}],
15:[function(h,w,C){C.cast=function(e){return e&&"object"===typeof e&&e.constructor===this?e:new this(function(k){k(e)})}},{}],16:[function(h,w,C){var e={instrument:!1};C.config=e;C.configure=function(k,h){if(2===arguments.length)e[k]=h;else return e[k]}},{}],17:[function(h,w,C){(function(e){var k=h("./promise").Promise,A=h("./utils").isFunction;C.polyfill=function(){var h;h="undefined"!==typeof e?e:"undefined"!==typeof window&&window.document?window:self;"Promise"in h&&"cast"in h.Promise&&"resolve"in
h.Promise&&"reject"in h.Promise&&"all"in h.Promise&&"race"in h.Promise&&function(){var e;new h.Promise(function(k){e=k});return A(e)}()||(h.Promise=k)}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./promise":18,"./utils":22}],18:[function(h,w,C){function e(a){if(!v(a))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof e))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
this._subscribers=[];k(a,this)}function k(d,b){function c(c){D(b,c)}function p(c){a(b,c)}try{d(c,p)}catch(g){p(g)}}function A(d,b,c,p){var g=v(c),q,f,e,k;if(g)try{q=c(p),e=!0}catch(n){k=!0,f=n}else q=p,e=!0;F(b,q)||(g&&e?D(b,q):k?a(b,f):d===G?D(b,q):d===R&&a(b,q))}function E(a,d,c,p){a=a._subscribers;var g=a.length;a[g]=d;a[g+G]=c;a[g+R]=p}function m(a,d){for(var c,p,g=a._subscribers,b=a._detail,f=0;f<g.length;f+=3)c=g[f],p=g[f+d],A(d,c,p,b);a._subscribers=null}function F(d,b){var c=null,p;try{if(d===
b)throw new TypeError("A promises callback cannot return that same promise.");if(u(b)&&(c=b.then,v(c)))return c.call(b,function(c){if(p)return!0;p=!0;b!==c?D(d,c):f(d,c)},function(c){if(p)return!0;p=!0;a(d,c)}),!0}catch(g){if(p)return!0;a(d,g);return!0}return!1}function D(a,d){a===d?f(a,d):F(a,d)||f(a,d)}function f(a,d){a._state===z&&(a._state=K,a._detail=d,t.async(b,a))}function a(a,b){a._state===z&&(a._state=K,a._detail=b,t.async(d,a))}function b(a){m(a,a._state=G)}function d(a){m(a,a._state=R)}
var t=h("./config").config;h("./config");var u=h("./utils").objectOrFunction,v=h("./utils").isFunction;h("./utils");w=h("./cast").cast;var x=h("./all").all,O=h("./race").race,P=h("./resolve").resolve,Q=h("./reject").reject;h=h("./asap").asap;t.async=h;var z=void 0,K=0,G=1,R=2;e.prototype={constructor:e,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(a,d){var c=this,p=new this.constructor(function(){});if(this._state){var g=arguments;t.async(function(){A(c._state,p,g[c._state-1],c._detail)})}else E(this,
p,a,d);return p},"catch":function(a){return this.then(null,a)}};e.all=x;e.cast=w;e.race=O;e.resolve=P;e.reject=Q;C.Promise=e},{"./all":13,"./asap":14,"./cast":15,"./config":16,"./race":19,"./reject":20,"./resolve":21,"./utils":22}],19:[function(h,w,C){var e=h("./utils").isArray;C.race=function(k){if(!e(k))throw new TypeError("You must pass an array to race.");return new this(function(e,h){for(var m,w=0;w<k.length;w++)(m=k[w])&&"function"===typeof m.then?m.then(e,h):e(m)})}},{"./utils":22}],20:[function(h,
w,C){C.reject=function(e){return new this(function(k,h){h(e)})}},{}],21:[function(h,w,C){C.resolve=function(e){return new this(function(k,h){k(e)})}},{}],22:[function(h,w,C){function e(e){return"function"===typeof e}h=Date.now||function(){return(new Date).getTime()};C.objectOrFunction=function(k){return e(k)||"object"===typeof k&&null!==k};C.isFunction=e;C.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)};C.now=h},{}],23:[function(h,w,C){function e(){}h=w.exports={};
h.nextTick=function(){if("undefined"!==typeof window&&window.setImmediate)return function(e){return window.setImmediate(e)};if("undefined"!==typeof window&&window.postMessage&&window.addEventListener){var e=[];window.addEventListener("message",function(h){var w=h.source;w!==window&&null!==w||"process-tick"!==h.data||(h.stopPropagation(),0<e.length&&e.shift()())},!0);return function(h){e.push(h);window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}();h.title="browser";h.browser=
!0;h.env={};h.argv=[];h.on=e;h.once=e;h.off=e;h.emit=e;h.binding=function(e){throw Error("process.binding is not supported");};h.cwd=function(){return"/"};h.chdir=function(e){throw Error("process.chdir is not supported");}},{}],24:[function(h,w,C){function e(){}function k(){this.was=[0]}function A(c,d,g){this.hufts=new Int32Array(3*a);this.window=new Uint8Array(g);this.end=g;this.checkfn=d;this.mode=x;this.reset(c,null);this.index=this.table=this.left=0;this.blens=null;this.bb=new Int32Array(1);this.tb=
new Int32Array(1);this.codes=new E;this.check=this.write=this.read=this.bitb=this.bitk=this.last=0;this.inftree=new m}function E(){}function m(){}function F(c,a,d,b,e){if(0!=e){if(!c)throw"Undef src";if(!d)throw"Undef dest";if(0==a&&e==c.length)d.set(c,b);else if(l)c=c.subarray(a,a+e),d.set(c,b);else if(1==c.BYTES_PER_ELEMENT&&100<e)c=new Uint8Array(c.buffer,c.byteOffset+a,e),d.set(c,b);else for(var f=0;f<e;++f)d[b+f]=c[a+f]}}function D(c,a,g,q){c=a?g?new Uint8Array(c,a,g):new Uint8Array(c,a,c.byteLength-
a):new Uint8Array(c);g=new e;g.inflateInit(f,!0);g.next_in=c;g.next_in_index=0;g.avail_in=c.length;c=[];for(var k=0;;){var r=new Uint8Array(32E3);g.next_out=r;g.next_out_index=0;g.avail_out=r.length;var B=g.inflate(b);if(B!=d&&B!=t&&B!=u)throw g.msg;if(0!=g.avail_out){var n=new Uint8Array(r.length-g.avail_out);F(r,0,n,0,r.length-g.avail_out);r=n}c.push(r);k+=r.length;if(B==t||B==u)break}q&&(q[0]=(a||0)+g.next_in_index);if(1==c.length)return c[0].buffer;a=new Uint8Array(k);for(g=q=0;g<c.length;++g)k=
c[g],F(k,0,a,q,k.length),q+=k.length;return a.buffer}var f=15,a=1440,b=0,d=0,t=1,u=-5,v=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],x=0,O=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,
4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,
9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,
93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,
7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,
60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,
0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,
9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,
0,8,79,0,9,255],P=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],Q=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],K=[1,2,3,4,5,7,9,13,17,25,33,49,
65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],G=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];e.prototype.inflateInit=function(c,a){c||(c=f);a&&(a=!1);this.istate=new k;return this.istate.inflateInit(this,a?-c:c)};e.prototype.inflate=function(c){return null==this.istate?-2:this.istate.inflate(this,c)};e.prototype.inflateEnd=function(){if(null==this.istate)return-2;var c=istate.inflateEnd(this);this.istate=null;return c};e.prototype.inflateSync=
function(){return istate.inflateSync(this)};e.prototype.inflateSetDictionary=function(c,a){return istate.inflateSetDictionary(this,c,a)};k.prototype.inflateReset=function(c){if(null==c||null==c.istate)return-2;c.total_in=c.total_out=0;c.msg=null;c.istate.mode=0!=c.istate.nowrap?7:0;c.istate.blocks.reset(c,null);return d};k.prototype.inflateEnd=function(c){null!=this.blocks&&this.blocks.free(c);this.blocks=null;return d};k.prototype.inflateInit=function(c,a){this.blocks=c.msg=null;nowrap=0;0>a&&(a=
-a,nowrap=1);if(8>a||15<a)return this.inflateEnd(c),-2;this.wbits=a;c.istate.blocks=new A(c,0!=c.istate.nowrap?null:this,1<<a);this.inflateReset(c);return d};k.prototype.inflate=function(c,a){var g,b;if(null==c||null==c.istate||null==c.next_in)return-2;a=4==a?u:d;for(g=u;;)switch(c.istate.mode){case 0:if(0==c.avail_in)return g;g=a;c.avail_in--;c.total_in++;if(8!=((c.istate.method=c.next_in[c.next_in_index++])&15)){c.istate.mode=13;c.msg="unknown compression method";c.istate.marker=5;break}if((c.istate.method>>
4)+8>c.istate.wbits){c.istate.mode=13;c.msg="invalid window size";c.istate.marker=5;break}c.istate.mode=1;case 1:if(0==c.avail_in)return g;g=a;c.avail_in--;c.total_in++;b=c.next_in[c.next_in_index++]&255;if(0!=((c.istate.method<<8)+b)%31){c.istate.mode=13;c.msg="incorrect header check";c.istate.marker=5;break}if(0==(b&32)){c.istate.mode=7;break}c.istate.mode=2;case 2:if(0==c.avail_in)return g;g=a;c.avail_in--;c.total_in++;c.istate.need=(c.next_in[c.next_in_index++]&255)<<24&4278190080;c.istate.mode=
3;case 3:if(0==c.avail_in)return g;g=a;c.avail_in--;c.total_in++;c.istate.need+=(c.next_in[c.next_in_index++]&255)<<16&16711680;c.istate.mode=4;case 4:if(0==c.avail_in)return g;g=a;c.avail_in--;c.total_in++;c.istate.need+=(c.next_in[c.next_in_index++]&255)<<8&65280;c.istate.mode=5;case 5:if(0==c.avail_in)return g;c.avail_in--;c.total_in++;c.istate.need+=c.next_in[c.next_in_index++]&255;c.adler=c.istate.need;c.istate.mode=6;return 2;case 6:return c.istate.mode=13,c.msg="need dictionary",c.istate.marker=
0,-2;case 7:g=c.istate.blocks.proc(c,g);if(-3==g){c.istate.mode=13;c.istate.marker=0;break}g==d&&(g=a);if(g!=t)return g;g=a;c.istate.blocks.reset(c,c.istate.was);if(0!=c.istate.nowrap){c.istate.mode=12;break}c.istate.mode=8;case 8:if(0==c.avail_in)return g;g=a;c.avail_in--;c.total_in++;c.istate.need=(c.next_in[c.next_in_index++]&255)<<24&4278190080;c.istate.mode=9;case 9:if(0==c.avail_in)return g;g=a;c.avail_in--;c.total_in++;c.istate.need+=(c.next_in[c.next_in_index++]&255)<<16&16711680;c.istate.mode=
10;case 10:if(0==c.avail_in)return g;g=a;c.avail_in--;c.total_in++;c.istate.need+=(c.next_in[c.next_in_index++]&255)<<8&65280;c.istate.mode=11;case 11:if(0==c.avail_in)return g;g=a;c.avail_in--;c.total_in++;c.istate.need+=c.next_in[c.next_in_index++]&255;if(c.istate.was[0]!=c.istate.need){c.istate.mode=13;c.msg="incorrect data check";c.istate.marker=5;break}c.istate.mode=12;case 12:return t;case 13:return-3;default:return-2}};k.prototype.inflateSetDictionary=function(c,a,g){var b=0,e=g;if(null==c||
null==c.istate||6!=c.istate.mode)return-2;if(c._adler.adler32(1,a,0,g)!=c.adler)return-3;c.adler=c._adler.adler32(0,null,0,0);e>=1<<c.istate.wbits&&(e=(1<<c.istate.wbits)-1,b=g-e);c.istate.blocks.set_dictionary(a,b,e);c.istate.mode=7;return d};var R=[0,0,255,255];k.prototype.inflateSync=function(c){var a,g,b;if(null==c||null==c.istate)return-2;13!=c.istate.mode&&(c.istate.mode=13,c.istate.marker=0);if(0==(a=c.avail_in))return u;g=c.next_in_index;for(b=c.istate.marker;0!=a&&4>b;)c.next_in[g]==R[b]?
b++:b=0!=c.next_in[g]?0:4-b,g++,a--;c.total_in+=g-c.next_in_index;c.next_in_index=g;c.avail_in=a;c.istate.marker=b;if(4!=b)return-3;a=c.total_in;g=c.total_out;this.inflateReset(c);c.total_in=a;c.total_out=g;c.istate.mode=7;return d};k.prototype.inflateSyncPoint=function(c){return null==c||null==c.istate||null==c.istate.blocks?-2:c.istate.blocks.sync_point()};var s=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];A.prototype.reset=function(c,a){a&&(a[0]=this.check);6==this.mode&&this.codes.free(c);
this.mode=x;this.read=this.write=this.bitb=this.bitk=0;this.checkfn&&(c.adler=this.check=c._adler.adler32(0,null,0,0))};A.prototype.proc=function(c,a){var g,b,e,f,k,n,h;f=c.next_in_index;k=c.avail_in;b=this.bitb;e=this.bitk;n=this.write;for(h=n<this.read?this.read-n-1:this.end-n;;)switch(this.mode){case x:for(;3>e;){if(0!=k)a=d;else return this.bitb=b,this.bitk=e,c.avail_in=k,c.total_in+=f-c.next_in_index,c.next_in_index=f,this.write=n,this.inflate_flush(c,a);k--;b|=(c.next_in[f++]&255)<<e;e+=8}g=
b&7;this.last=g&1;switch(g>>>1){case 0:b>>>=3;e-=3;g=e&7;b>>>=g;e-=g;this.mode=1;break;case 1:var m=new Int32Array(1),l=new Int32Array(1),u=[],y=[];g=l;var w=u,z=y;m[0]=9;g[0]=5;w[0]=O;z[0]=P;this.codes.init(m[0],l[0],u[0],0,y[0],0,c);b>>>=3;e-=3;this.mode=6;break;case 2:b>>>=3;e-=3;this.mode=3;break;case 3:return b>>>=3,e-=3,this.mode=13,c.msg="invalid block type",a=-3,this.bitb=b,this.bitk=e,c.avail_in=k,c.total_in+=f-c.next_in_index,c.next_in_index=f,this.write=n,this.inflate_flush(c,a)}break;
case 1:for(;32>e;){if(0!=k)a=d;else return this.bitb=b,this.bitk=e,c.avail_in=k,c.total_in+=f-c.next_in_index,c.next_in_index=f,this.write=n,this.inflate_flush(c,a);k--;b|=(c.next_in[f++]&255)<<e;e+=8}if((~b>>>16&65535)!=(b&65535))return this.mode=13,c.msg="invalid stored block lengths",a=-3,this.bitb=b,this.bitk=e,c.avail_in=k,c.total_in+=f-c.next_in_index,c.next_in_index=f,this.write=n,this.inflate_flush(c,a);this.left=b&65535;b=e=0;this.mode=0!=this.left?2:0!=this.last?7:x;break;case 2:if(0==k)return this.bitb=
b,this.bitk=e,c.avail_in=k,c.total_in+=f-c.next_in_index,c.next_in_index=f,write=n,this.inflate_flush(c,a);if(0==h&&(n==end&&0!=read&&(n=0,h=n<this.read?this.read-n-1:this.end-n),0==h&&(this.write=n,a=this.inflate_flush(c,a),n=this.write,h=n<this.read?this.read-n-1:this.end-n,n==this.end&&0!=this.read&&(n=0,h=n<this.read?this.read-n-1:this.end-n),0==h)))return this.bitb=b,this.bitk=e,c.avail_in=k,c.total_in+=f-c.next_in_index,c.next_in_index=f,this.write=n,this.inflate_flush(c,a);a=d;g=this.left;
g>k&&(g=k);g>h&&(g=h);F(c.next_in,f,this.window,n,g);f+=g;k-=g;n+=g;h-=g;if(0!=(this.left-=g))break;this.mode=0!=this.last?7:x;break;case 3:for(;14>e;){if(0!=k)a=d;else return this.bitb=b,this.bitk=e,c.avail_in=k,c.total_in+=f-c.next_in_index,c.next_in_index=f,this.write=n,this.inflate_flush(c,a);k--;b|=(c.next_in[f++]&255)<<e;e+=8}this.table=g=b&16383;if(29<(g&31)||29<(g>>5&31))return this.mode=9,c.msg="too many length or distance symbols",a=-3,this.bitb=b,this.bitk=e,c.avail_in=k,c.total_in+=f-
c.next_in_index,c.next_in_index=f,this.write=n,this.inflate_flush(c,a);g=258+(g&31)+(g>>5&31);if(null==this.blens||this.blens.length<g)this.blens=new Int32Array(g);else for(h=0;h<g;h++)this.blens[h]=0;b>>>=14;e-=14;this.index=0;mode=4;case 4:for(;this.index<4+(this.table>>>10);){for(;3>e;){if(0!=k)a=d;else return this.bitb=b,this.bitk=e,c.avail_in=k,c.total_in+=f-c.next_in_index,c.next_in_index=f,this.write=n,this.inflate_flush(c,a);k--;b|=(c.next_in[f++]&255)<<e;e+=8}this.blens[s[this.index++]]=
b&7;b>>>=3;e-=3}for(;19>this.index;)this.blens[s[this.index++]]=0;this.bb[0]=7;g=this.inftree.inflate_trees_bits(this.blens,this.bb,this.tb,this.hufts,c);if(g!=d)return a=g,-3==a&&(this.blens=null,this.mode=9),this.bitb=b,this.bitk=e,c.avail_in=k,c.total_in+=f-c.next_in_index,c.next_in_index=f,write=n,this.inflate_flush(c,a);this.index=0;this.mode=5;case 5:for(;;){g=this.table;if(!(this.index<258+(g&31)+(g>>5&31)))break;for(g=this.bb[0];e<g;){if(0!=k)a=d;else return this.bitb=b,this.bitk=e,c.avail_in=
k,c.total_in+=f-c.next_in_index,c.next_in_index=f,this.write=n,this.inflate_flush(c,a);k--;b|=(c.next_in[f++]&255)<<e;e+=8}g=this.hufts[3*(this.tb[0]+(b&v[g]))+1];l=this.hufts[3*(this.tb[0]+(b&v[g]))+2];if(16>l)b>>>=g,e-=g,this.blens[this.index++]=l;else{h=18==l?7:l-14;for(m=18==l?11:3;e<g+h;){if(0!=k)a=d;else return this.bitb=b,this.bitk=e,c.avail_in=k,c.total_in+=f-c.next_in_index,c.next_in_index=f,this.write=n,this.inflate_flush(c,a);k--;b|=(c.next_in[f++]&255)<<e;e+=8}b>>>=g;e-=g;m+=b&v[h];b>>>=
h;e-=h;h=this.index;g=this.table;if(h+m>258+(g&31)+(g>>5&31)||16==l&&1>h)return this.blens=null,this.mode=9,c.msg="invalid bit length repeat",a=-3,this.bitb=b,this.bitk=e,c.avail_in=k,c.total_in+=f-c.next_in_index,c.next_in_index=f,this.write=n,this.inflate_flush(c,a);l=16==l?this.blens[h-1]:0;do this.blens[h++]=l;while(0!=--m);this.index=h}}this.tb[0]=-1;m=new Int32Array(1);l=new Int32Array(1);u=new Int32Array(1);y=new Int32Array(1);m[0]=9;l[0]=6;g=this.table;g=this.inftree.inflate_trees_dynamic(257+
(g&31),1+(g>>5&31),this.blens,m,l,u,y,this.hufts,c);if(g!=d)return-3==g&&(this.blens=null,this.mode=13),a=g,this.bitb=b,this.bitk=e,c.avail_in=k,c.total_in+=f-c.next_in_index,c.next_in_index=f,this.write=n,this.inflate_flush(c,a);this.codes.init(m[0],l[0],this.hufts,u[0],this.hufts,y[0],c);this.mode=6;case 6:this.bitb=b;this.bitk=e;c.avail_in=k;c.total_in+=f-c.next_in_index;c.next_in_index=f;this.write=n;if((a=this.codes.proc(this,c,a))!=t)return this.inflate_flush(c,a);a=d;this.codes.free(c);f=c.next_in_index;
k=c.avail_in;b=this.bitb;e=this.bitk;n=this.write;h=n<this.read?this.read-n-1:this.end-n;if(0==this.last){this.mode=x;break}this.mode=7;case 7:this.write=n;a=this.inflate_flush(c,a);n=this.write;if(this.read!=this.write)return this.bitb=b,this.bitk=e,c.avail_in=k,c.total_in+=f-c.next_in_index,c.next_in_index=f,this.write=n,this.inflate_flush(c,a);mode=12;case 8:return a=t,this.bitb=b,this.bitk=e,c.avail_in=k,c.total_in+=f-c.next_in_index,c.next_in_index=f,this.write=n,this.inflate_flush(c,a);case 9:return a=
-3,this.bitb=b,this.bitk=e,c.avail_in=k,c.total_in+=f-c.next_in_index,c.next_in_index=f,this.write=n,this.inflate_flush(c,a);default:return a=-2,this.bitb=b,this.bitk=e,c.avail_in=k,c.total_in+=f-c.next_in_index,c.next_in_index=f,this.write=n,this.inflate_flush(c,a)}};A.prototype.free=function(c){this.reset(c,null);this.hufts=this.window=null};A.prototype.set_dictionary=function(c,a,b){F(c,a,window,0,b);this.read=this.write=b};A.prototype.sync_point=function(){return 1==this.mode};A.prototype.inflate_flush=
function(c,a){var b,e,f;e=c.next_out_index;f=this.read;b=(f<=this.write?this.write:this.end)-f;b>c.avail_out&&(b=c.avail_out);0!=b&&a==u&&(a=d);c.avail_out-=b;c.total_out+=b;null!=this.checkfn&&(c.adler=this.check=c._adler.adler32(this.check,this.window,f,b));F(this.window,f,c.next_out,e,b);e+=b;f+=b;f==this.end&&(f=0,this.write==this.end&&(this.write=0),b=this.write-f,b>c.avail_out&&(b=c.avail_out),0!=b&&a==u&&(a=d),c.avail_out-=b,c.total_out+=b,null!=this.checkfn&&(c.adler=this.check=c._adler.adler32(this.check,
this.window,f,b)),F(this.window,f,c.next_out,e,b),e+=b,f+=b);c.next_out_index=e;this.read=f;return a};E.prototype.init=function(a,b,d,e,f,k,h){this.mode=0;this.lbits=a;this.dbits=b;this.ltree=d;this.ltree_index=e;this.dtree=f;this.dtree_index=k;this.tree=null};E.prototype.proc=function(a,b,e){var f,k,r=0,h=0,n=0,m,l,s,n=b.next_in_index;m=b.avail_in;r=a.bitb;h=a.bitk;l=a.write;for(s=l<a.read?a.read-l-1:a.end-l;;)switch(this.mode){case 0:if(258<=s&&10<=m&&(a.bitb=r,a.bitk=h,b.avail_in=m,b.total_in+=
n-b.next_in_index,b.next_in_index=n,a.write=l,e=this.inflate_fast(this.lbits,this.dbits,this.ltree,this.ltree_index,this.dtree,this.dtree_index,a,b),n=b.next_in_index,m=b.avail_in,r=a.bitb,h=a.bitk,l=a.write,s=l<a.read?a.read-l-1:a.end-l,e!=d)){this.mode=e==t?7:9;break}this.need=this.lbits;this.tree=this.ltree;this.tree_index=this.ltree_index;this.mode=1;case 1:for(f=this.need;h<f;){if(0!=m)e=d;else return a.bitb=r,a.bitk=h,b.avail_in=m,b.total_in+=n-b.next_in_index,b.next_in_index=n,a.write=l,a.inflate_flush(b,
e);m--;r|=(b.next_in[n++]&255)<<h;h+=8}f=3*(this.tree_index+(r&v[f]));r>>>=this.tree[f+1];h-=this.tree[f+1];k=this.tree[f];if(0==k){this.lit=this.tree[f+2];this.mode=6;break}if(0!=(k&16)){this.get=k&15;this.len=this.tree[f+2];this.mode=2;break}if(0==(k&64)){this.need=k;this.tree_index=f/3+this.tree[f+2];break}if(0!=(k&32)){this.mode=7;break}this.mode=9;b.msg="invalid literal/length code";e=-3;a.bitb=r;a.bitk=h;b.avail_in=m;b.total_in+=n-b.next_in_index;b.next_in_index=n;a.write=l;return a.inflate_flush(b,
e);case 2:for(f=this.get;h<f;){if(0!=m)e=d;else return a.bitb=r,a.bitk=h,b.avail_in=m,b.total_in+=n-b.next_in_index,b.next_in_index=n,a.write=l,a.inflate_flush(b,e);m--;r|=(b.next_in[n++]&255)<<h;h+=8}this.len+=r&v[f];r>>=f;h-=f;this.need=this.dbits;this.tree=this.dtree;this.tree_index=this.dtree_index;this.mode=3;case 3:for(f=this.need;h<f;){if(0!=m)e=d;else return a.bitb=r,a.bitk=h,b.avail_in=m,b.total_in+=n-b.next_in_index,b.next_in_index=n,a.write=l,a.inflate_flush(b,e);m--;r|=(b.next_in[n++]&
255)<<h;h+=8}f=3*(this.tree_index+(r&v[f]));r>>=this.tree[f+1];h-=this.tree[f+1];k=this.tree[f];if(0!=(k&16)){this.get=k&15;this.dist=this.tree[f+2];this.mode=4;break}if(0==(k&64)){this.need=k;this.tree_index=f/3+this.tree[f+2];break}this.mode=9;b.msg="invalid distance code";e=-3;a.bitb=r;a.bitk=h;b.avail_in=m;b.total_in+=n-b.next_in_index;b.next_in_index=n;a.write=l;return a.inflate_flush(b,e);case 4:for(f=this.get;h<f;){if(0!=m)e=d;else return a.bitb=r,a.bitk=h,b.avail_in=m,b.total_in+=n-b.next_in_index,
b.next_in_index=n,a.write=l,a.inflate_flush(b,e);m--;r|=(b.next_in[n++]&255)<<h;h+=8}this.dist+=r&v[f];r>>=f;h-=f;this.mode=5;case 5:for(f=l-this.dist;0>f;)f+=a.end;for(;0!=this.len;){if(0==s&&(l==a.end&&0!=a.read&&(l=0,s=l<a.read?a.read-l-1:a.end-l),0==s&&(a.write=l,e=a.inflate_flush(b,e),l=a.write,s=l<a.read?a.read-l-1:a.end-l,l==a.end&&0!=a.read&&(l=0,s=l<a.read?a.read-l-1:a.end-l),0==s)))return a.bitb=r,a.bitk=h,b.avail_in=m,b.total_in+=n-b.next_in_index,b.next_in_index=n,a.write=l,a.inflate_flush(b,
e);a.window[l++]=a.window[f++];s--;f==a.end&&(f=0);this.len--}this.mode=0;break;case 6:if(0==s&&(l==a.end&&0!=a.read&&(l=0,s=l<a.read?a.read-l-1:a.end-l),0==s&&(a.write=l,e=a.inflate_flush(b,e),l=a.write,s=l<a.read?a.read-l-1:a.end-l,l==a.end&&0!=a.read&&(l=0,s=l<a.read?a.read-l-1:a.end-l),0==s)))return a.bitb=r,a.bitk=h,b.avail_in=m,b.total_in+=n-b.next_in_index,b.next_in_index=n,a.write=l,a.inflate_flush(b,e);e=d;a.window[l++]=this.lit;s--;this.mode=0;break;case 7:7<h&&(h-=8,m++,n--);a.write=l;
e=a.inflate_flush(b,e);l=a.write;if(a.read!=a.write)return a.bitb=r,a.bitk=h,b.avail_in=m,b.total_in+=n-b.next_in_index,b.next_in_index=n,a.write=l,a.inflate_flush(b,e);this.mode=8;case 8:return e=t,a.bitb=r,a.bitk=h,b.avail_in=m,b.total_in+=n-b.next_in_index,b.next_in_index=n,a.write=l,a.inflate_flush(b,e);case 9:return e=-3,a.bitb=r,a.bitk=h,b.avail_in=m,b.total_in+=n-b.next_in_index,b.next_in_index=n,a.write=l,a.inflate_flush(b,e);default:return e=-2,a.bitb=r,a.bitk=h,b.avail_in=m,b.total_in+=
n-b.next_in_index,b.next_in_index=n,a.write=l,a.inflate_flush(b,e)}};E.prototype.free=function(a){};E.prototype.inflate_fast=function(a,b,e,f,k,h,l,n){var m,s,u,w,y,x,z,A,C,E,I,D;x=n.next_in_index;z=n.avail_in;w=l.bitb;y=l.bitk;A=l.write;C=A<l.read?l.read-A-1:l.end-A;a=v[a];E=v[b];do{for(;20>y;)z--,w|=(n.next_in[x++]&255)<<y,y+=8;m=w&a;s=e;u=f;D=3*(u+m);if(0==(b=s[D]))w>>=s[D+1],y-=s[D+1],l.window[A++]=s[D+2],C--;else{do{w>>=s[D+1];y-=s[D+1];if(0!=(b&16)){b&=15;I=s[D+2]+(w&v[b]);w>>=b;for(y-=b;15>
y;)z--,w|=(n.next_in[x++]&255)<<y,y+=8;m=w&E;s=k;u=h;D=3*(u+m);b=s[D];do if(w>>=s[D+1],y-=s[D+1],0!=(b&16)){for(b&=15;y<b;)z--,w|=(n.next_in[x++]&255)<<y,y+=8;m=s[D+2]+(w&v[b]);w>>=b;y-=b;C-=I;if(A>=m)m=A-m,l.window[A++]=l.window[m++],l.window[A++]=l.window[m++],I-=2;else{m=A-m;do m+=l.end;while(0>m);b=l.end-m;if(I>b){I-=b;if(0<A-m&&b>A-m){do l.window[A++]=l.window[m++];while(0!=--b)}else F(l.window,m,l.window,A,b),A+=b;m=0}}do l.window[A++]=l.window[m++];while(0!=--I);break}else if(0==(b&64))m+=
s[D+2],m+=w&v[b],D=3*(u+m),b=s[D];else return n.msg="invalid distance code",I=n.avail_in-z,I=y>>3<I?y>>3:I,z+=I,x-=I,y-=I<<3,l.bitb=w,l.bitk=y,n.avail_in=z,n.total_in+=x-n.next_in_index,n.next_in_index=x,l.write=A,-3;while(1);break}if(0==(b&64)){if(m+=s[D+2],m+=w&v[b],D=3*(u+m),0==(b=s[D])){w>>=s[D+1];y-=s[D+1];l.window[A++]=s[D+2];C--;break}}else{if(0!=(b&32))return I=n.avail_in-z,I=y>>3<I?y>>3:I,z+=I,x-=I,y-=I<<3,l.bitb=w,l.bitk=y,n.avail_in=z,n.total_in+=x-n.next_in_index,n.next_in_index=x,l.write=
A,t;n.msg="invalid literal/length code";I=n.avail_in-z;I=y>>3<I?y>>3:I;z+=I;x-=I;y-=I<<3;l.bitb=w;l.bitk=y;n.avail_in=z;n.total_in+=x-n.next_in_index;n.next_in_index=x;l.write=A;return-3}}while(1)}}while(258<=C&&10<=z);I=n.avail_in-z;I=y>>3<I?y>>3:I;x-=I;l.bitb=w;l.bitk=y-(I<<3);n.avail_in=z+I;n.total_in+=x-n.next_in_index;n.next_in_index=x;l.write=A;return d};m.prototype.huft_build=function(c,b,e,f,k,h,l,n,m,s,w){var v,y,t,x,z,A,C,D,E;A=0;y=e;do this.c[c[b+A]]++,A++,y--;while(0!=y);if(this.c[0]==
e)return l[0]=-1,n[0]=0,d;z=n[0];for(t=1;15>=t&&0==this.c[t];t++);x=t;z<t&&(z=t);for(y=15;0!=y&&0==this.c[y];y--);s=y;z>y&&(z=y);n[0]=z;for(n=1<<t;t<y;t++,n<<=1)if(0>(n-=this.c[t]))return-3;if(0>(n-=this.c[y]))return-3;this.c[y]+=n;this.x[1]=t=0;A=1;for(C=2;0!=--y;)this.x[C]=t+=this.c[A],C++,A++;A=y=0;do 0!=(t=c[b+A])&&(this.v[this.x[t]++]=y),A++;while(++y<e);e=this.x[s];A=this.x[0]=y=0;b=-1;D=-z;for(E=C=this.u[0]=0;x<=s;x++)for(c=this.c[x];0!=c--;){for(;x>D+z;){b++;D+=z;E=s-D;E=E>z?z:E;if((v=1<<
(t=x-D))>c+1&&(v-=c+1,C=x,t<E))for(;++t<E&&!((v<<=1)<=this.c[++C]);)v-=this.c[C];E=1<<t;if(this.hn[0]+E>a)return-3;this.u[b]=C=this.hn[0];this.hn[0]+=E;0!=b?(this.x[b]=y,this.r[0]=t,this.r[1]=z,t=y>>>D-z,this.r[2]=C-this.u[b-1]-t,F(this.r,0,m,3*(this.u[b-1]+t),3)):l[0]=C}this.r[1]=x-D;A>=e?this.r[0]=192:w[A]<f?(this.r[0]=256>this.v[A]?0:96,this.r[2]=this.v[A++]):(this.r[0]=h[this.v[A]-f]+16+64,this.r[2]=k[this.v[A++]-f]);v=1<<x-D;for(t=y>>>D;t<E;t+=v)F(this.r,0,m,3*(C+t),3);for(t=1<<x-1;0!=(y&t);t>>>=
1)y^=t;y^=t;for(t=(1<<D)-1;(y&t)!=this.x[b];)b--,D-=z,t=(1<<D)-1}return 0!=n&&1!=s?u:d};m.prototype.inflate_trees_bits=function(a,b,d,e,f){this.initWorkArea(19);this.hn[0]=0;a=this.huft_build(a,0,19,19,null,null,d,b,e,this.hn,this.v);if(-3==a)f.msg="oversubscribed dynamic bit lengths tree";else if(a==u||0==b[0])f.msg="incomplete dynamic bit lengths tree",a=-3;return a};m.prototype.inflate_trees_dynamic=function(a,b,e,f,k,h,l,n,m){this.initWorkArea(288);this.hn[0]=0;h=this.huft_build(e,0,a,257,Q,z,
h,f,n,this.hn,this.v);if(h!=d||0==f[0])return-3==h?m.msg="oversubscribed literal/length tree":-4!=h&&(m.msg="incomplete literal/length tree",h=-3),h;this.initWorkArea(288);h=this.huft_build(e,a,b,0,K,G,l,k,n,this.hn,this.v);return h!=d||0==k[0]&&257<a?(-3==h?m.msg="oversubscribed distance tree":h==u?(m.msg="incomplete distance tree",h=-3):-4!=h&&(m.msg="empty distance tree with lengths",h=-3),h):d};m.prototype.initWorkArea=function(a){null==this.hn&&(this.hn=new Int32Array(1),this.v=new Int32Array(a),
this.c=new Int32Array(16),this.r=new Int32Array(3),this.u=new Int32Array(15),this.x=new Int32Array(16));this.v.length<a&&(this.v=new Int32Array(a));for(var b=0;b<a;b++)this.v[b]=0;for(b=0;16>b;b++)this.c[b]=0;for(b=0;3>b;b++)this.r[b]=0;F(this.c,0,this.u,0,15);F(this.c,0,this.x,0,16)};var l="function"===typeof(new Uint8Array(1)).subarray;"undefined"!==typeof w&&(w.exports={inflateBuffer:D,arrayCopy:F})},{}]},{},[7]);
